/*! For license information please see index.0932253aaed7e708e7b7.js.LICENSE.txt */
"use strict";(self.webpackChunkbest_chess_games=self.webpackChunkbest_chess_games||[]).push([[57],{4307:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMTAwIDEwMCIgaGVpZ2h0PSIxMDAiIHdpZHRoPSIxMDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQogICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCwwKSI+DQogICAgICAgIDxnPg0KICAgICAgICAgICAgPHRleHQgeD0iNCIgeT0iMTgiIHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiBmb250LXNpemU9IjIwIiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiB0cmFuc2Zvcm09InNjYWxlKDEpIiBzdHJva2U9ImJsYWNrIj4xLzI8L3RleHQ+DQogICAgICAgIDwvZz4NCiAgICA8L2c+DQo8L3N2Zz4="},3650:e=>{e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pg0KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjAvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvVFIvMjAwMS9SRUMtU1ZHLTIwMDEwOTA0L0RURC9zdmcxMC5kdGQiPg0KPCEtLSBDcmVhdG9yOiBDb3JlbERSQVcgLS0+DQo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6b2RtPSJodHRwOi8vcHJvZHVjdC5jb3JlbC5jb20vQ0dTLzExL2NkZG5zLyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgd2lkdGg9IjI1MHB4IiBoZWlnaHQ9IjM1MXB4IiBzdHlsZT0ic2hhcGUtcmVuZGVyaW5nOmdlb21ldHJpY1ByZWNpc2lvbjsgaW1hZ2UtcmVuZGVyaW5nOm9wdGltaXplUXVhbGl0eSINCiAgICAgdmlld0JveD0iMCAwIDI1MCAzNTIiPg0KICA8cGF0aCBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyMTtzdHJva2UtbGluZWNhcDpyb3VuZCIgZD0iTTQyIDI0N2wwIC0xOTMiLz4NCiAgPHBhdGggc3R5bGU9ImZpbGw6I0ZGRkZGRjtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTA7c3Ryb2tlLWxpbmVqb2luOnJvdW5kIiBkPSJNNDkgNTBjNzAsMzAgMTA0LDI4IDE3OCwyIC0yMSw0MiAtMjEsNzQgMCwxMTYgLTcyLDI1IC0xMDEsMjUgLTE3OCwwbDAgLTExOHoiLz4NCjwvc3ZnPg0K"},4825:e=>{e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWw6c3BhY2U9InByZXNlcnZlIiB3aWR0aD0iNjAwIiBoZWlnaHQ9IjU3MSI+DQogIDxwYXRoIGQ9Im0yOTkuOTkuMjAzLTMyLjQ4NiAxMDAuMDI0LTM4LjMzOCAxMTcuOTNIMGw4NS4wOTkgNjEuODA5IDEwMC4zMTIgNzIuODc4LTM4LjMxNyAxMTcuOTMzLTMyLjQ4MyAxMDAuMDIxIDg1LjA3NS02MS44MDkgMTAwLjMxMi03Mi44NzcgMTAwLjMzMiA3Mi44NzcgODUuMDc1IDYxLjc4OC0zMi40ODYtMTAwLjAwMy0zOC4zMTQtMTE3LjkxIDEwMC4zMzItNzIuODk3IDg1LjA3NS02MS44MDlIMzcwLjg0bC0zOC4zNDItMTE3Ljk1MUwyOTkuOTkuMjAzeiIvPg0KICA8cGF0aCBmaWxsPSIjRkZGIiBkPSJNMjk5Ljk5OSAxMTAuNzc1IDI1NC4wMSAyNTIuMzE3SDEwNS4xN2wxMjAuNDEzIDg3LjQ3Ni00NS45ODUgMTQxLjU0MkwzMDAgMzkzLjg1OWwxMjAuNDEyIDg3LjQ3Ni00NS45ODYtMTQxLjU0MiAxMjAuNDEzLTg3LjQ3NkgzNDUuOTk3bC00NS45OTgtMTQxLjU0MnoiLz4NCjwvc3ZnPg=="},7765:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0iY3VycmVudENvbG9yIiBjbGFzcz0iYmkgYmktc2tpcC1lbmQiIHZpZXdCb3g9IjAgMCAxNiAxNiI+DQogIDxwYXRoIGQ9Ik0xMi41IDRhLjUuNSAwIDAgMC0xIDB2My4yNDhMNS4yMzMgMy42MTJDNC43MTMgMy4zMSA0IDMuNjU1IDQgNC4zMDh2Ny4zODRjMCAuNjUzLjcxMy45OTggMS4yMzMuNjk2TDExLjUgOC43NTJWMTJhLjUuNSAwIDAgMCAxIDB6TTUgNC42MzMgMTAuODA0IDggNSAxMS4zNjd6Ii8+DQo8L3N2Zz4="},9221:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0iY3VycmVudENvbG9yIiBjbGFzcz0iYmkgYmktZmFzdC1mb3J3YXJkIiB2aWV3Qm94PSIwIDAgMTYgMTYiPg0KICA8cGF0aCBkPSJNNi44MDQgOCAxIDQuNjMzdjYuNzM0em0uNzkyLS42OTZhLjgwMi44MDIgMCAwIDEgMCAxLjM5MmwtNi4zNjMgMy42OTJDLjcxMyAxMi42OSAwIDEyLjM0NSAwIDExLjY5MlY0LjMwOGMwLS42NTMuNzEzLS45OTggMS4yMzMtLjY5NnoiLz4NCiAgPHBhdGggZD0iTTE0LjgwNCA4IDkgNC42MzN2Ni43MzR6bS43OTItLjY5NmEuODAyLjgwMiAwIDAgMSAwIDEuMzkybC02LjM2MyAzLjY5MkM4LjcxMyAxMi42OSA4IDEyLjM0NSA4IDExLjY5MlY0LjMwOGMwLS42NTMuNzEzLS45OTggMS4yMzMtLjY5NnoiLz4NCjwvc3ZnPg=="},3589:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0iY3VycmVudENvbG9yIiBjbGFzcz0iYmkgYmktYXJyb3ctcmlnaHQtY2lyY2xlIiB2aWV3Qm94PSIwIDAgMTYgMTYiPg0KICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xIDhhNyA3IDAgMSAwIDE0IDBBNyA3IDAgMCAwIDEgOG0xNSAwQTggOCAwIDEgMSAwIDhhOCA4IDAgMCAxIDE2IDBNNC41IDcuNWEuNS41IDAgMCAwIDAgMWg1Ljc5M2wtMi4xNDcgMi4xNDZhLjUuNSAwIDAgMCAuNzA4LjcwOGwzLTNhLjUuNSAwIDAgMCAwLS43MDhsLTMtM2EuNS41IDAgMSAwLS43MDguNzA4TDEwLjI5MyA3LjV6Ii8+DQo8L3N2Zz4="},2492:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0iY3VycmVudENvbG9yIiBjbGFzcz0iYmkgYmktcGF1c2UiIHZpZXdCb3g9IjAgMCAxNiAxNiI+DQogIDxwYXRoIGQ9Ik02IDMuNWEuNS41IDAgMCAxIC41LjV2OGEuNS41IDAgMCAxLTEgMFY0YS41LjUgMCAwIDEgLjUtLjVtNCAwYS41LjUgMCAwIDEgLjUuNXY4YS41LjUgMCAwIDEtMSAwVjRhLjUuNSAwIDAgMSAuNS0uNSIvPg0KPC9zdmc+"},4388:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0iY3VycmVudENvbG9yIiBjbGFzcz0iYmkgYmktcGxheSIgdmlld0JveD0iMCAwIDE2IDE2Ij4NCiAgPHBhdGggZD0iTTEwLjgwNCA4IDUgNC42MzN2Ni43MzR6bS43OTItLjY5NmEuODAyLjgwMiAwIDAgMSAwIDEuMzkybC02LjM2MyAzLjY5MkM0LjcxMyAxMi42OSA0IDEyLjM0NSA0IDExLjY5MlY0LjMwOGMwLS42NTMuNzEzLS45OTggMS4yMzMtLjY5NnoiLz4NCjwvc3ZnPg=="},125:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0iY3VycmVudENvbG9yIiBjbGFzcz0iYmkgYmktYXJyb3ctbGVmdC1jaXJjbGUiIHZpZXdCb3g9IjAgMCAxNiAxNiI+DQogIDxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTEgOGE3IDcgMCAxIDAgMTQgMEE3IDcgMCAwIDAgMSA4bTE1IDBBOCA4IDAgMSAxIDAgOGE4IDggMCAwIDEgMTYgMG0tNC41LS41YS41LjUgMCAwIDEgMCAxSDUuNzA3bDIuMTQ3IDIuMTQ2YS41LjUgMCAwIDEtLjcwOC43MDhsLTMtM2EuNS41IDAgMCAxIDAtLjcwOGwzLTNhLjUuNSAwIDEgMSAuNzA4LjcwOEw1LjcwNyA3LjV6Ii8+DQo8L3N2Zz4="},2891:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0iY3VycmVudENvbG9yIiBjbGFzcz0iYmkgYmktcmV3aW5kIiB2aWV3Qm94PSIwIDAgMTYgMTYiPg0KICA8cGF0aCBkPSJNOS4xOTYgOCAxNSA0LjYzM3Y2LjczNHptLS43OTItLjY5NmEuODAyLjgwMiAwIDAgMCAwIDEuMzkybDYuMzYzIDMuNjkyYy41Mi4zMDIgMS4yMzMtLjA0MyAxLjIzMy0uNjk2VjQuMzA4YzAtLjY1My0uNzEzLS45OTgtMS4yMzMtLjY5NnoiLz4NCiAgPHBhdGggZD0iTTEuMTk2IDggNyA0LjYzM3Y2LjczNHptLS43OTItLjY5NmEuODAyLjgwMiAwIDAgMCAwIDEuMzkybDYuMzYzIDMuNjkyYy41Mi4zMDIgMS4yMzMtLjA0MyAxLjIzMy0uNjk2VjQuMzA4YzAtLjY1My0uNzEzLS45OTgtMS4yMzMtLjY5NnoiLz4NCjwvc3ZnPg=="},6275:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0iY3VycmVudENvbG9yIiBjbGFzcz0iYmkgYmktYXJyb3ctcmVwZWF0IiB2aWV3Qm94PSIwIDAgMTYgMTYiPg0KICA8cGF0aCBkPSJNMTEuNTM0IDdoMy45MzJhLjI1LjI1IDAgMCAxIC4xOTIuNDFsLTEuOTY2IDIuMzZhLjI1LjI1IDAgMCAxLS4zODQgMGwtMS45NjYtMi4zNmEuMjUuMjUgMCAwIDEgLjE5Mi0uNDFtLTExIDJoMy45MzJhLjI1LjI1IDAgMCAwIC4xOTItLjQxTDIuNjkyIDYuMjNhLjI1LjI1IDAgMCAwLS4zODQgMEwuMzQyIDguNTlBLjI1LjI1IDAgMCAwIC41MzQgOSIvPg0KICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik04IDNjLTEuNTUyIDAtMi45NC43MDctMy44NTcgMS44MThhLjUuNSAwIDEgMS0uNzcxLS42MzZBNi4wMDIgNi4wMDIgMCAwIDEgMTMuOTE3IDdIMTIuOUE1IDUgMCAwIDAgOCAzTTMuMSA5YTUuMDAyIDUuMDAyIDAgMCAwIDguNzU3IDIuMTgyLjUuNSAwIDEgMSAuNzcxLjYzNkE2LjAwMiA2LjAwMiAwIDAgMSAyLjA4MyA5eiIvPg0KPC9zdmc+"},4218:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0iY3VycmVudENvbG9yIiBjbGFzcz0iYmkgYmktY2FtZXJhIiB2aWV3Qm94PSIwIDAgMTYgMTYiPg0KICA8cGF0aCBkPSJNMTUgMTJhMSAxIDAgMCAxLTEgMUgyYTEgMSAwIDAgMS0xLTFWNmExIDEgMCAwIDEgMS0xaDEuMTcyYTMgMyAwIDAgMCAyLjEyLS44NzlsLjgzLS44MjhBMSAxIDAgMCAxIDYuODI3IDNoMi4zNDRhMSAxIDAgMCAxIC43MDcuMjkzbC44MjguODI4QTMgMyAwIDAgMCAxMi44MjggNUgxNGExIDEgMCAwIDEgMSAxek0yIDRhMiAyIDAgMCAwLTIgMnY2YTIgMiAwIDAgMCAyIDJoMTJhMiAyIDAgMCAwIDItMlY2YTIgMiAwIDAgMC0yLTJoLTEuMTcyYTIgMiAwIDAgMS0xLjQxNC0uNTg2bC0uODI4LS44MjhBMiAyIDAgMCAwIDkuMTcyIDJINi44MjhhMiAyIDAgMCAwLTEuNDE0LjU4NmwtLjgyOC44MjhBMiAyIDAgMCAxIDMuMTcyIDR6Ii8+DQogIDxwYXRoIGQ9Ik04IDExYTIuNSAyLjUgMCAxIDEgMC01IDIuNSAyLjUgMCAwIDEgMCA1bTAgMWEzLjUgMy41IDAgMSAwIDAtNyAzLjUgMy41IDAgMCAwIDAgN00zIDYuNWEuNS41IDAgMSAxLTEgMCAuNS41IDAgMCAxIDEgMCIvPg0KPC9zdmc+"},8750:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0iY3VycmVudENvbG9yIiBjbGFzcz0iYmkgYmktc2tpcC1zdGFydCIgdmlld0JveD0iMCAwIDE2IDE2Ij4NCiAgPHBhdGggZD0iTTQgNGEuNS41IDAgMCAxIDEgMHYzLjI0OGw2LjI2Ny0zLjYzNmMuNTItLjMwMiAxLjIzMy4wNDMgMS4yMzMuNjk2djcuMzg0YzAgLjY1My0uNzEzLjk5OC0xLjIzMy42OTZMNSA4Ljc1MlYxMmEuNS41IDAgMCAxLTEgMHptNy41LjYzM0w1LjY5NiA4bDUuODA0IDMuMzY3eiIvPg0KPC9zdmc+"},2169:(e,t,i)=>{i.r(t),i.d(t,{BISHOP:()=>n,BLACK:()=>o,Chess:()=>O,DEFAULT_POSITION:()=>h,KING:()=>l,KNIGHT:()=>r,PAWN:()=>s,QUEEN:()=>c,ROOK:()=>d,SQUARES:()=>u,WHITE:()=>a,validateFen:()=>S});const a="w",o="b",s="p",r="n",n="b",d="r",c="q",l="k",h="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",f=-1,g={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"},u=["a8","b8","c8","d8","e8","f8","g8","h8","a7","b7","c7","d7","e7","f7","g7","h7","a6","b6","c6","d6","e6","f6","g6","h6","a5","b5","c5","d5","e5","f5","g5","h5","a4","b4","c4","d4","e4","f4","g4","h4","a3","b3","c3","d3","e3","f3","g3","h3","a2","b2","c2","d2","e2","f2","g2","h2","a1","b1","c1","d1","e1","f1","g1","h1"],x={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},N={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},b={b:[16,32,17,15],w:[-16,-32,-17,-15]},R={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},p=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],B=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],m={p:1,n:2,b:4,r:8,q:16,k:32},v=[r,n,d,c],M={[l]:x.KSIDE_CASTLE,[c]:x.QSIDE_CASTLE},C={w:[{square:N.a1,flag:x.QSIDE_CASTLE},{square:N.h1,flag:x.KSIDE_CASTLE}],b:[{square:N.a8,flag:x.QSIDE_CASTLE},{square:N.h8,flag:x.KSIDE_CASTLE}]},y={b:1,w:6},I=["1-0","0-1","1/2-1/2","*"];function K(e){return e>>4}function k(e){return 15&e}function Q(e){return-1!=="0123456789".indexOf(e)}function E(e){const t=k(e),i=K(e);return"abcdefgh".substring(t,t+1)+"87654321".substring(i,i+1)}function A(e){return e===a?o:a}function S(e){const t=e.split(/\s+/);if(6!==t.length)return{ok:!1,error:"Invalid FEN: must contain six space-delimited fields"};const i=parseInt(t[5],10);if(isNaN(i)||i<=0)return{ok:!1,error:"Invalid FEN: move number must be a positive integer"};const a=parseInt(t[4],10);if(isNaN(a)||a<0)return{ok:!1,error:"Invalid FEN: half move counter number must be a non-negative integer"};if(!/^(-|[abcdefgh][36])$/.test(t[3]))return{ok:!1,error:"Invalid FEN: en-passant square is invalid"};if(/[^kKqQ-]/.test(t[2]))return{ok:!1,error:"Invalid FEN: castling availability is invalid"};if(!/^(w|b)$/.test(t[1]))return{ok:!1,error:"Invalid FEN: side-to-move is invalid"};const o=t[0].split("/");if(8!==o.length)return{ok:!1,error:"Invalid FEN: piece data does not contain 8 '/'-delimited rows"};for(let e=0;e<o.length;e++){let t=0,i=!1;for(let a=0;a<o[e].length;a++)if(Q(o[e][a])){if(i)return{ok:!1,error:"Invalid FEN: piece data is invalid (consecutive number)"};t+=parseInt(o[e][a],10),i=!0}else{if(!/^[prnbqkPRNBQK]$/.test(o[e][a]))return{ok:!1,error:"Invalid FEN: piece data is invalid (invalid piece)"};t+=1,i=!1}if(8!==t)return{ok:!1,error:"Invalid FEN: piece data is invalid (too many squares in rank)"}}if("3"==t[3][1]&&"w"==t[1]||"6"==t[3][1]&&"b"==t[1])return{ok:!1,error:"Invalid FEN: illegal en-passant square"};const s=[{color:"white",regex:/K/g},{color:"black",regex:/k/g}];for(const{color:e,regex:i}of s){if(!i.test(t[0]))return{ok:!1,error:`Invalid FEN: missing ${e} king`};if((t[0].match(i)||[]).length>1)return{ok:!1,error:`Invalid FEN: too many ${e} kings`}}return Array.from(o[0]+o[7]).some((e=>"P"===e.toUpperCase()))?{ok:!1,error:"Invalid FEN: some pawns are on the edge rows"}:{ok:!0}}function _(e,t,i,a,o,r=void 0,n=x.NORMAL){const d=K(a);if(o!==s||7!==d&&0!==d)e.push({color:t,from:i,to:a,piece:o,captured:r,flags:n});else for(let s=0;s<v.length;s++){const d=v[s];e.push({color:t,from:i,to:a,piece:o,captured:r,promotion:d,flags:n|x.PROMOTION})}}function w(e){let t=e.charAt(0);if(t>="a"&&t<="h"){if(e.match(/[a-h]\d.*[a-h]\d/))return;return s}return t=t.toLowerCase(),"o"===t?l:t}function D(e){return e.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}function L(e){return e.split(" ").slice(0,4).join(" ")}class O{_board=new Array(128);_turn=a;_header={};_kings={w:f,b:f};_epSquare=-1;_halfMoves=0;_moveNumber=0;_history=[];_comments={};_castling={w:0,b:0};_positionCount={};constructor(e=h){this.load(e)}clear({preserveHeaders:e=!1}={}){this._board=new Array(128),this._kings={w:f,b:f},this._turn=a,this._castling={w:0,b:0},this._epSquare=f,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=e?this._header:{},this._positionCount={},delete this._header.SetUp,delete this._header.FEN}removeHeader(e){e in this._header&&delete this._header[e]}load(e,{skipValidation:t=!1,preserveHeaders:i=!1}={}){let s=e.split(/\s+/);if(s.length>=2&&s.length<6){const t=["-","-","0","1"];e=s.concat(t.slice(-(6-s.length))).join(" ")}if(s=e.split(/\s+/),!t){const{ok:t,error:i}=S(e);if(!t)throw new Error(i)}const r=s[0];let n=0;this.clear({preserveHeaders:i});for(let e=0;e<r.length;e++){const t=r.charAt(e);if("/"===t)n+=8;else if(Q(t))n+=parseInt(t,10);else{const e=t<"a"?a:o;this._put({type:t.toLowerCase(),color:e},E(n)),n++}}this._turn=s[1],s[2].indexOf("K")>-1&&(this._castling.w|=x.KSIDE_CASTLE),s[2].indexOf("Q")>-1&&(this._castling.w|=x.QSIDE_CASTLE),s[2].indexOf("k")>-1&&(this._castling.b|=x.KSIDE_CASTLE),s[2].indexOf("q")>-1&&(this._castling.b|=x.QSIDE_CASTLE),this._epSquare="-"===s[3]?f:N[s[3]],this._halfMoves=parseInt(s[4],10),this._moveNumber=parseInt(s[5],10),this._updateSetup(e),this._incPositionCount(e)}fen(){let e=0,t="";for(let i=N.a8;i<=N.h1;i++){if(this._board[i]){e>0&&(t+=e,e=0);const{color:o,type:s}=this._board[i];t+=o===a?s.toUpperCase():s.toLowerCase()}else e++;i+1&136&&(e>0&&(t+=e),i!==N.h1&&(t+="/"),e=0,i+=8)}let i="";this._castling[a]&x.KSIDE_CASTLE&&(i+="K"),this._castling[a]&x.QSIDE_CASTLE&&(i+="Q"),this._castling[o]&x.KSIDE_CASTLE&&(i+="k"),this._castling[o]&x.QSIDE_CASTLE&&(i+="q"),i=i||"-";let r="-";if(this._epSquare!==f){const e=this._epSquare+(this._turn===a?16:-16),t=[e+1,e-1];for(const e of t){if(136&e)continue;const t=this._turn;if(this._board[e]?.color===t&&this._board[e]?.type===s){this._makeMove({color:t,from:e,to:this._epSquare,piece:s,captured:s,flags:x.EP_CAPTURE});const i=!this._isKingAttacked(t);if(this._undoMove(),i){r=E(this._epSquare);break}}}}return[t,this._turn,i,r,this._halfMoves,this._moveNumber].join(" ")}_updateSetup(e){this._history.length>0||(e!==h?(this._header.SetUp="1",this._header.FEN=e):(delete this._header.SetUp,delete this._header.FEN))}reset(){this.load(h)}get(e){return this._board[N[e]]||!1}put({type:e,color:t},i){return!!this._put({type:e,color:t},i)&&(this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),!0)}_put({type:e,color:t},i){if(-1==="pnbrqkPNBRQK".indexOf(e.toLowerCase()))return!1;if(!(i in N))return!1;const a=N[i];if(e==l&&this._kings[t]!=f&&this._kings[t]!=a)return!1;const o=this._board[a];return o&&o.type===l&&(this._kings[o.color]=f),this._board[a]={type:e,color:t},e===l&&(this._kings[t]=a),!0}remove(e){const t=this.get(e);return delete this._board[N[e]],t&&t.type===l&&(this._kings[t.color]=f),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),t}_updateCastlingRights(){const e=this._board[N.e1]?.type===l&&this._board[N.e1]?.color===a,t=this._board[N.e8]?.type===l&&this._board[N.e8]?.color===o;e&&this._board[N.a1]?.type===d&&this._board[N.a1]?.color===a||(this._castling.w&=~x.QSIDE_CASTLE),e&&this._board[N.h1]?.type===d&&this._board[N.h1]?.color===a||(this._castling.w&=~x.KSIDE_CASTLE),t&&this._board[N.a8]?.type===d&&this._board[N.a8]?.color===o||(this._castling.b&=~x.QSIDE_CASTLE),t&&this._board[N.h8]?.type===d&&this._board[N.h8]?.color===o||(this._castling.b&=~x.KSIDE_CASTLE)}_updateEnPassantSquare(){if(this._epSquare===f)return;const e=this._epSquare+(this._turn===a?-16:16),t=this._epSquare+(this._turn===a?16:-16),i=[t+1,t-1];null===this._board[e]&&null===this._board[this._epSquare]&&this._board[t]?.color===A(this._turn)&&this._board[t]?.type===s&&i.some((e=>!(136&e)&&this._board[e]?.color===this._turn&&this._board[e]?.type===s))||(this._epSquare=f)}_attacked(e,t){for(let i=N.a8;i<=N.h1;i++){if(136&i){i+=7;continue}if(void 0===this._board[i]||this._board[i].color!==e)continue;const r=this._board[i],n=i-t;if(0===n)continue;const d=n+119;if(p[d]&m[r.type]){if(r.type===s){if(n>0){if(r.color===a)return!0}else if(r.color===o)return!0;continue}if("n"===r.type||"k"===r.type)return!0;const e=B[d];let c=i+e,l=!1;for(;c!==t;){if(null!=this._board[c]){l=!0;break}c+=e}if(!l)return!0}}return!1}_isKingAttacked(e){const t=this._kings[e];return-1!==t&&this._attacked(A(e),t)}isAttacked(e,t){return this._attacked(t,N[e])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&0===this._moves().length}isStalemate(){return!this.isCheck()&&0===this._moves().length}isInsufficientMaterial(){const e={b:0,n:0,r:0,q:0,k:0,p:0},t=[];let i=0,a=0;for(let o=N.a8;o<=N.h1;o++){if(a=(a+1)%2,136&o){o+=7;continue}const s=this._board[o];s&&(e[s.type]=s.type in e?e[s.type]+1:1,s.type===n&&t.push(a),i++)}if(2===i)return!0;if(3===i&&(1===e[n]||1===e[r]))return!0;if(i===e[n]+2){let e=0;const i=t.length;for(let a=0;a<i;a++)e+=t[a];if(0===e||e===i)return!0}return!1}isThreefoldRepetition(){return this._getPositionCount(this.fen())>=3}isDraw(){return this._halfMoves>=100||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isStalemate()||this.isDraw()}moves({verbose:e=!1,square:t,piece:i}={}){const a=this._moves({square:t,piece:i});return e?a.map((e=>this._makePretty(e))):a.map((e=>this._moveToSan(e,a)))}_moves({legal:e=!0,piece:t,square:i}={}){const a=i?i.toLowerCase():void 0,o=t?.toLowerCase(),n=[],d=this._turn,c=A(d);let h=N.a8,f=N.h1,g=!1;if(a){if(!(a in N))return[];h=f=N[a],g=!0}for(let e=h;e<=f;e++){if(136&e){e+=7;continue}if(!this._board[e]||this._board[e].color===c)continue;const{type:t}=this._board[e];let i;if(t===s){if(o&&o!==t)continue;i=e+b[d][0],this._board[i]||(_(n,d,e,i,s),i=e+b[d][1],y[d]!==K(e)||this._board[i]||_(n,d,e,i,s,void 0,x.BIG_PAWN));for(let t=2;t<4;t++)i=e+b[d][t],136&i||(this._board[i]?.color===c?_(n,d,e,i,s,this._board[i].type,x.CAPTURE):i===this._epSquare&&_(n,d,e,i,s,s,x.EP_CAPTURE))}else{if(o&&o!==t)continue;for(let a=0,o=R[t].length;a<o;a++){const o=R[t][a];for(i=e;i+=o,!(136&i);){if(this._board[i]){if(this._board[i].color===d)break;_(n,d,e,i,t,this._board[i].type,x.CAPTURE);break}if(_(n,d,e,i,t),t===r||t===l)break}}}}if(!(void 0!==o&&o!==l||g&&f!==this._kings[d])){if(this._castling[d]&x.KSIDE_CASTLE){const e=this._kings[d],t=e+2;this._board[e+1]||this._board[t]||this._attacked(c,this._kings[d])||this._attacked(c,e+1)||this._attacked(c,t)||_(n,d,this._kings[d],t,l,void 0,x.KSIDE_CASTLE)}if(this._castling[d]&x.QSIDE_CASTLE){const e=this._kings[d],t=e-2;this._board[e-1]||this._board[e-2]||this._board[e-3]||this._attacked(c,this._kings[d])||this._attacked(c,e-1)||this._attacked(c,t)||_(n,d,this._kings[d],t,l,void 0,x.QSIDE_CASTLE)}}if(!e||-1===this._kings[d])return n;const u=[];for(let e=0,t=n.length;e<t;e++)this._makeMove(n[e]),this._isKingAttacked(d)||u.push(n[e]),this._undoMove();return u}move(e,{strict:t=!1}={}){let i=null;if("string"==typeof e)i=this._moveFromSan(e,t);else if("object"==typeof e){const t=this._moves();for(let a=0,o=t.length;a<o;a++)if(e.from===E(t[a].from)&&e.to===E(t[a].to)&&(!("promotion"in t[a])||e.promotion===t[a].promotion)){i=t[a];break}}if(!i)throw"string"==typeof e?new Error(`Invalid move: ${e}`):new Error(`Invalid move: ${JSON.stringify(e)}`);const a=this._makePretty(i);return this._makeMove(i),this._incPositionCount(a.after),a}_push(e){this._history.push({move:e,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_makeMove(e){const t=this._turn,i=A(t);if(this._push(e),this._board[e.to]=this._board[e.from],delete this._board[e.from],e.flags&x.EP_CAPTURE&&(this._turn===o?delete this._board[e.to-16]:delete this._board[e.to+16]),e.promotion&&(this._board[e.to]={type:e.promotion,color:t}),this._board[e.to].type===l){if(this._kings[t]=e.to,e.flags&x.KSIDE_CASTLE){const t=e.to-1,i=e.to+1;this._board[t]=this._board[i],delete this._board[i]}else if(e.flags&x.QSIDE_CASTLE){const t=e.to+1,i=e.to-2;this._board[t]=this._board[i],delete this._board[i]}this._castling[t]=0}if(this._castling[t])for(let i=0,a=C[t].length;i<a;i++)if(e.from===C[t][i].square&&this._castling[t]&C[t][i].flag){this._castling[t]^=C[t][i].flag;break}if(this._castling[i])for(let t=0,a=C[i].length;t<a;t++)if(e.to===C[i][t].square&&this._castling[i]&C[i][t].flag){this._castling[i]^=C[i][t].flag;break}e.flags&x.BIG_PAWN?this._epSquare=t===o?e.to-16:e.to+16:this._epSquare=f,e.piece===s||e.flags&(x.CAPTURE|x.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,t===o&&this._moveNumber++,this._turn=i}undo(){const e=this._undoMove();if(e){const t=this._makePretty(e);return this._decPositionCount(t.after),t}return null}_undoMove(){const e=this._history.pop();if(void 0===e)return null;const t=e.move;this._kings=e.kings,this._turn=e.turn,this._castling=e.castling,this._epSquare=e.epSquare,this._halfMoves=e.halfMoves,this._moveNumber=e.moveNumber;const i=this._turn,a=A(i);if(this._board[t.from]=this._board[t.to],this._board[t.from].type=t.piece,delete this._board[t.to],t.captured)if(t.flags&x.EP_CAPTURE){let e;e=i===o?t.to-16:t.to+16,this._board[e]={type:s,color:a}}else this._board[t.to]={type:t.captured,color:a};if(t.flags&(x.KSIDE_CASTLE|x.QSIDE_CASTLE)){let e,i;t.flags&x.KSIDE_CASTLE?(e=t.to+1,i=t.to-1):(e=t.to-2,i=t.to+1),this._board[e]=this._board[i],delete this._board[i]}return t}pgn({newline:e="\n",maxWidth:t=0}={}){const i=[];let a=!1;for(const t in this._header)i.push("["+t+' "'+this._header[t]+'"]'+e),a=!0;a&&this._history.length&&i.push(e);const o=e=>{const t=this._comments[this.fen()];return void 0!==t&&(e=`${e}${e.length>0?" ":""}{${t}}`),e},s=[];for(;this._history.length>0;)s.push(this._undoMove());const r=[];let n="";for(0===s.length&&r.push(o(""));s.length>0;){n=o(n);const e=s.pop();if(!e)break;if(this._history.length||"b"!==e.color)"w"===e.color&&(n.length&&r.push(n),n=this._moveNumber+".");else{const e=`${this._moveNumber}. ...`;n=n?`${n} ${e}`:e}n=n+" "+this._moveToSan(e,this._moves({legal:!0})),this._makeMove(e)}if(n.length&&r.push(o(n)),void 0!==this._header.Result&&r.push(this._header.Result),0===t)return i.join("")+r.join(" ");const d=function(){return i.length>0&&" "===i[i.length-1]&&(i.pop(),!0)},c=function(a,o){for(const s of o.split(" "))if(s){if(a+s.length>t){for(;d();)a--;i.push(e),a=0}i.push(s),a+=s.length,i.push(" "),a++}return d()&&a--,a};let l=0;for(let a=0;a<r.length;a++)l+r[a].length>t&&r[a].includes("{")?l=c(l,r[a]):(l+r[a].length>t&&0!==a?(" "===i[i.length-1]&&i.pop(),i.push(e),l=0):0!==a&&(i.push(" "),l++),i.push(r[a]),l+=r[a].length);return i.join("")}header(...e){for(let t=0;t<e.length;t+=2)"string"==typeof e[t]&&"string"==typeof e[t+1]&&(this._header[e[t]]=e[t+1]);return this._header}loadPgn(e,{strict:t=!1,newlineChar:i="\r?\n"}={}){function a(e){return e.replace(/\\/g,"\\")}e=e.trim();const o=new RegExp("^(\\[((?:"+a(i)+")|.)*\\])((?:\\s*"+a(i)+"){2}|(?:\\s*"+a(i)+")*$)").exec(e),s=o&&o.length>=2?o[1]:"";this.reset();const r=function(e){const t={},o=e.split(new RegExp(a(i)));let s="",r="";for(let e=0;e<o.length;e++){const i=/^\s*\[\s*([A-Za-z]+)\s*"(.*)"\s*\]\s*$/;s=o[e].replace(i,"$1"),r=o[e].replace(i,"$2"),s.trim().length>0&&(t[s]=r)}return t}(s);let n="";for(const e in r)"fen"===e.toLowerCase()&&(n=r[e]),this.header(e,r[e]);if(t){if("1"===r.SetUp){if(!("FEN"in r))throw new Error("Invalid PGN: FEN tag must be supplied with SetUp tag");this.load(r.FEN,{preserveHeaders:!0})}}else n&&this.load(n,{preserveHeaders:!0});const d=function(e){return`{${function(e){return Array.from(e).map((function(e){return e.charCodeAt(0)<128?e.charCodeAt(0).toString(16):encodeURIComponent(e).replace(/%/g,"").toLowerCase()})).join("")}((e=e.replace(new RegExp(a(i),"g")," ")).slice(1,e.length-1))}}`},c=function(e){if(e.startsWith("{")&&e.endsWith("}"))return function(e){return 0==e.length?"":decodeURIComponent("%"+(e.match(/.{1,2}/g)||[]).join("%"))}(e.slice(1,e.length-1))};let l=e.replace(s,"").replace(new RegExp(`({[^}]*})+?|;([^${a(i)}]*)`,"g"),(function(e,t,i){return void 0!==t?d(t):" "+d(`{${i.slice(1)}}`)})).replace(new RegExp(a(i),"g")," ");const h=/(\([^()]+\))+?/g;for(;h.test(l);)l=l.replace(h,"");l=l.replace(/\d+\.(\.\.)?/g,""),l=l.replace(/\.\.\./g,""),l=l.replace(/\$\d+/g,"");let f=l.trim().split(new RegExp(/\s+/));f=f.filter((e=>""!==e));let g="";for(let e=0;e<f.length;e++){const i=c(f[e]);if(void 0!==i){this._comments[this.fen()]=i;continue}const a=this._moveFromSan(f[e],t);if(null==a){if(!(I.indexOf(f[e])>-1))throw new Error(`Invalid move in PGN: ${f[e]}`);g=f[e]}else g="",this._makeMove(a),this._incPositionCount(this.fen())}g&&Object.keys(this._header).length&&!this._header.Result&&this.header("Result",g)}_moveToSan(e,t){let i="";if(e.flags&x.KSIDE_CASTLE)i="O-O";else if(e.flags&x.QSIDE_CASTLE)i="O-O-O";else{if(e.piece!==s){const a=function(e,t){const i=e.from,a=e.to,o=e.piece;let s=0,r=0,n=0;for(let e=0,d=t.length;e<d;e++){const d=t[e].from,c=t[e].to;o===t[e].piece&&i!==d&&a===c&&(s++,K(i)===K(d)&&r++,k(i)===k(d)&&n++)}return s>0?r>0&&n>0?E(i):n>0?E(i).charAt(1):E(i).charAt(0):""}(e,t);i+=e.piece.toUpperCase()+a}e.flags&(x.CAPTURE|x.EP_CAPTURE)&&(e.piece===s&&(i+=E(e.from)[0]),i+="x"),i+=E(e.to),e.promotion&&(i+="="+e.promotion.toUpperCase())}return this._makeMove(e),this.isCheck()&&(this.isCheckmate()?i+="#":i+="+"),this._undoMove(),i}_moveFromSan(e,t=!1){const i=D(e);let a,o,s,r,n,d=w(i),c=this._moves({legal:!0,piece:d});for(let e=0,t=c.length;e<t;e++)if(i===D(this._moveToSan(c[e],c)))return c[e];if(t)return null;let l=!1;if(o=i.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/),o?(a=o[1],s=o[2],r=o[3],n=o[4],1==s.length&&(l=!0)):(o=i.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/),o&&(a=o[1],s=o[2],r=o[3],n=o[4],1==s.length&&(l=!0))),d=w(i),c=this._moves({legal:!0,piece:a||d}),!r)return null;for(let e=0,t=c.length;e<t;e++)if(s){if(!(a&&a.toLowerCase()!=c[e].piece||N[s]!=c[e].from||N[r]!=c[e].to||n&&n.toLowerCase()!=c[e].promotion))return c[e];if(l){const t=E(c[e].from);if(!(a&&a.toLowerCase()!=c[e].piece||N[r]!=c[e].to||s!=t[0]&&s!=t[1]||n&&n.toLowerCase()!=c[e].promotion))return c[e]}}else if(i===D(this._moveToSan(c[e],c)).replace("x",""))return c[e];return null}ascii(){let e="   +------------------------+\n";for(let t=N.a8;t<=N.h1;t++){if(0===k(t)&&(e+=" "+"87654321"[K(t)]+" |"),this._board[t]){const i=this._board[t].type;e+=" "+(this._board[t].color===a?i.toUpperCase():i.toLowerCase())+" "}else e+=" . ";t+1&136&&(e+="|\n",t+=8)}return e+="   +------------------------+\n",e+="     a  b  c  d  e  f  g  h",e}perft(e){const t=this._moves({legal:!1});let i=0;const a=this._turn;for(let o=0,s=t.length;o<s;o++)this._makeMove(t[o]),this._isKingAttacked(a)||(e-1>0?i+=this.perft(e-1):i++),this._undoMove();return i}_makePretty(e){const{color:t,piece:i,from:a,to:o,flags:s,captured:r,promotion:n}=e;let d="";for(const e in x)x[e]&s&&(d+=g[e]);const c=E(a),l=E(o),h={color:t,piece:i,from:c,to:l,san:this._moveToSan(e,this._moves({legal:!0})),flags:d,lan:c+l,before:this.fen(),after:""};return this._makeMove(e),h.after=this.fen(),this._undoMove(),r&&(h.captured=r),n&&(h.promotion=n,h.lan+=n),h}turn(){return this._turn}board(){const e=[];let t=[];for(let i=N.a8;i<=N.h1;i++)null==this._board[i]?t.push(null):t.push({square:E(i),type:this._board[i].type,color:this._board[i].color}),i+1&136&&(e.push(t),t=[],i+=8);return e}squareColor(e){if(e in N){const t=N[e];return(K(t)+k(t))%2==0?"light":"dark"}return null}history({verbose:e=!1}={}){const t=[],i=[];for(;this._history.length>0;)t.push(this._undoMove());for(;;){const a=t.pop();if(!a)break;e?i.push(this._makePretty(a)):i.push(this._moveToSan(a,this._moves())),this._makeMove(a)}return i}_getPositionCount(e){const t=L(e);return this._positionCount[t]||0}_incPositionCount(e){const t=L(e);void 0===this._positionCount[t]&&(this._positionCount[t]=0),this._positionCount[t]+=1}_decPositionCount(e){const t=L(e);1===this._positionCount[t]?delete this._positionCount[t]:this._positionCount[t]-=1}_pruneComments(){const e=[],t={},i=e=>{e in this._comments&&(t[e]=this._comments[e])};for(;this._history.length>0;)e.push(this._undoMove());for(i(this.fen());;){const t=e.pop();if(!t)break;this._makeMove(t),i(this.fen())}this._comments=t}getComment(){return this._comments[this.fen()]}setComment(e){this._comments[this.fen()]=e.replace("{","[").replace("}","]")}deleteComment(){const e=this._comments[this.fen()];return delete this._comments[this.fen()],e}getComments(){return this._pruneComments(),Object.keys(this._comments).map((e=>({fen:e,comment:this._comments[e]})))}deleteComments(){return this._pruneComments(),Object.keys(this._comments).map((e=>{const t=this._comments[e];return delete this._comments[e],{fen:e,comment:t}}))}setCastlingRights(e,t){for(const i of[l,c])void 0!==t[i]&&(t[i]?this._castling[e]|=M[i]:this._castling[e]&=~M[i]);this._updateCastlingRights();const i=this.getCastlingRights(e);return!(void 0!==t[l]&&t[l]!==i[l]||void 0!==t[c]&&t[c]!==i[c])}getCastlingRights(e){return{[l]:0!=(this._castling[e]&M[l]),[c]:0!=(this._castling[e]&M[c])}}moveNumber(){return this._moveNumber}}},734:(e,t,i)=>{i.d(t,{A:()=>n});var a=i(1601),o=i.n(a),s=i(6314),r=i.n(s)()(o());r.push([e.id,".game-nav-buttons{\n    margin-top:2px;\n    text-align: center;\n}\n.game-nav-buttons > img{\n    background-color:white;\n    padding:4px 8px;\n    border-radius:4px;\n    cursor:pointer;\n    margin-right:3px;\n}\n.game-nav-buttons > img:hover{\n    outline:2px solid #FC0;\n}\n.game-nav-buttons > img.disabled{\n    background-color:grey;\n    outline:none;\n}",""]);const n=r},4376:(e,t,i)=>{i.d(t,{A:()=>n});var a=i(1601),o=i.n(a),s=i(6314),r=i.n(s)()(o());r.push([e.id,".above {\n    margin-bottom: -3px;\n}\n.below{\n    margin-top:-1px;\n}\n.player{\n    column-count:2;\n    height:4vh;\n}\n.player .name{\n    clear:both;\n    text-align: right;\n    padding-right:4px;\n}\n.player .captures{\n    float:left;\n    margin-top:-5px;\n}\n.below .player .captures{\n    margin-top:-4px;\n}\n.player .score{\n    float:left;\n    margin-left:5px;\n    margin-top:2px;\n    font-size:10pt;\n}\n.player .captures svg{\n    position:static;\n    height:4vh;\n    width:4vh;\n    transform:none;\n    margin-top:0;\n    margin-bottom:-11px;\n}\n.player .captures .p svg:first-child{\n    margin-left:-4px;\n}\n.player .captures .p svg{\n    margin-left:-8px;\n    margin-right:-5px;\n}\n.player .captures .n{\n    margin-left: 2px;\n    margin-right: 1px;\n}\n.player .captures .n svg{\n    margin-left: -6px;\n    margin-right: -3px;\n}\n.player .captures .b svg{\n    margin-left: -7px;\n    margin-right: -4px;\n}\n.player .captures .r svg{\n    margin-left: -6px;\n    margin-right: -5px;\n}\n.player .captures .q svg{\n    margin-bottom:-10px;\n    margin-left: -2px;\n    margin-right: 0px;\n}",""]);const n=r},4223:(e,t,i)=>{i.d(t,{A:()=>n});var a=i(1601),o=i.n(a),s=i(6314),r=i.n(s)()(o());r.push([e.id,'#menu{height:100vh;position:absolute;width:320px;}\n#menu > .top{\n    position:absolute;\n    height:80px;\n    left:0;\n    right:0;\n}\n#menu input[type="file"] { display: none;}\n#menu .custom-file-upload {\n    margin-top:20px;\n    border-radius:8px;\n    border: 1px solid #ccc;\n    display: inline-block;\n    padding: 8px;\n    cursor: pointer;\n    margin-left:10px;\n}\n#menu > .items{position:absolute;top:65px;bottom:0;left:0;right:0;border-radius:2px;background-color:rgb(54,54,54);overflow:hidden;overflow-y:scroll;scrollbar-color:rgb(67,67,67) rgb(57,57,57);}\n#menu > .items > div{margin:2px 4px 2px 10px;padding:5px 8px;border-radius:8px;cursor:pointer;}\n#menu > .items > div.active{outline:1px solid rgb(98, 98, 98);background-color:rgb(62,62,62)}\n#menu > .items > div:hover{background-color:rgb(62, 62, 62)}\n.main{margin-left:320px;}\n.main > .left {float:left;width:49%;margin-top:55px;}\n.main > .left > .padding{padding:10px 5%;}\n.main > .right{width:50%;float:left;margin-top:71px;height:200px;}\n.main > .right > #history{padding:10px;line-height:22px;}\n.main > .right > #history > span{cursor:pointer;}\n@media only screen and (max-width: 750px) {\n    .main > .board {float:none;width:100%;}\n    .main > .right{float:none;width:100%;margin-top:0;}\n}\n',""]);const n=r},8730:(e,t,i)=>{i.d(t,{A:()=>n});var a=i(1601),o=i.n(a),s=i(6314),r=i.n(s)()(o());r.push([e.id,"body{\n    padding:0;\n    margin:0;\n    background-color:rgb(57,57,57);\n    color:rgb(245, 245, 245);\n    font-family:Cambria, Cochin, Georgia, Times, 'Times New Roman', serif\n}",""]);const n=r},6314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var i="",a=void 0!==t[5];return t[4]&&(i+="@supports (".concat(t[4],") {")),t[2]&&(i+="@media ".concat(t[2]," {")),a&&(i+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),i+=e(t),a&&(i+="}"),t[2]&&(i+="}"),t[4]&&(i+="}"),i})).join("")},t.i=function(e,i,a,o,s){"string"==typeof e&&(e=[[null,e,void 0]]);var r={};if(a)for(var n=0;n<this.length;n++){var d=this[n][0];null!=d&&(r[d]=!0)}for(var c=0;c<e.length;c++){var l=[].concat(e[c]);a&&r[l[0]]||(void 0!==s&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=s),i&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=i):l[2]=i),o&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=o):l[4]="".concat(o)),t.push(l))}},t}},1601:e=>{e.exports=function(e){return e[1]}},8269:(e,t,i)=>{i.r(t),i.d(t,{default:()=>b});var a=i(5072),o=i.n(a),s=i(7825),r=i.n(s),n=i(7659),d=i.n(n),c=i(5056),l=i.n(c),h=i(540),f=i.n(h),g=i(1113),u=i.n(g),x=i(734),N={};N.styleTagTransform=u(),N.setAttributes=l(),N.insert=d().bind(null,"head"),N.domAPI=r(),N.insertStyleElement=f(),o()(x.A,N);const b=x.A&&x.A.locals?x.A.locals:void 0},3235:(e,t,i)=>{i.r(t),i.d(t,{default:()=>b});var a=i(5072),o=i.n(a),s=i(7825),r=i.n(s),n=i(7659),d=i.n(n),c=i(5056),l=i.n(c),h=i(540),f=i.n(h),g=i(1113),u=i.n(g),x=i(4376),N={};N.styleTagTransform=u(),N.setAttributes=l(),N.insert=d().bind(null,"head"),N.domAPI=r(),N.insertStyleElement=f(),o()(x.A,N);const b=x.A&&x.A.locals?x.A.locals:void 0},6776:(e,t,i)=>{i.r(t),i.d(t,{default:()=>b});var a=i(5072),o=i.n(a),s=i(7825),r=i.n(s),n=i(7659),d=i.n(n),c=i(5056),l=i.n(c),h=i(540),f=i.n(h),g=i(1113),u=i.n(g),x=i(4223),N={};N.styleTagTransform=u(),N.setAttributes=l(),N.insert=d().bind(null,"head"),N.domAPI=r(),N.insertStyleElement=f(),o()(x.A,N);const b=x.A&&x.A.locals?x.A.locals:void 0},2339:(e,t,i)=>{i.r(t),i.d(t,{default:()=>b});var a=i(5072),o=i.n(a),s=i(7825),r=i.n(s),n=i(7659),d=i.n(n),c=i(5056),l=i.n(c),h=i(540),f=i.n(h),g=i(1113),u=i.n(g),x=i(8730),N={};N.styleTagTransform=u(),N.setAttributes=l(),N.insert=d().bind(null,"head"),N.domAPI=r(),N.insertStyleElement=f(),o()(x.A,N);const b=x.A&&x.A.locals?x.A.locals:void 0},5072:e=>{var t=[];function i(e){for(var i=-1,a=0;a<t.length;a++)if(t[a].identifier===e){i=a;break}return i}function a(e,a){for(var s={},r=[],n=0;n<e.length;n++){var d=e[n],c=a.base?d[0]+a.base:d[0],l=s[c]||0,h="".concat(c," ").concat(l);s[c]=l+1;var f=i(h),g={css:d[1],media:d[2],sourceMap:d[3],supports:d[4],layer:d[5]};if(-1!==f)t[f].references++,t[f].updater(g);else{var u=o(g,a);a.byIndex=n,t.splice(n,0,{identifier:h,updater:u,references:1})}r.push(h)}return r}function o(e,t){var i=t.domAPI(t);return i.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;i.update(e=t)}else i.remove()}}e.exports=function(e,o){var s=a(e=e||[],o=o||{});return function(e){e=e||[];for(var r=0;r<s.length;r++){var n=i(s[r]);t[n].references--}for(var d=a(e,o),c=0;c<s.length;c++){var l=i(s[c]);0===t[l].references&&(t[l].updater(),t.splice(l,1))}s=d}}},7659:e=>{var t={};e.exports=function(e,i){var a=function(e){if(void 0===t[e]){var i=document.querySelector(e);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}t[e]=i}return t[e]}(e);if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(i)}},540:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},5056:(e,t,i)=>{e.exports=function(e){var t=i.nc;t&&e.setAttribute("nonce",t)}},7825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(i){!function(e,t,i){var a="";i.supports&&(a+="@supports (".concat(i.supports,") {")),i.media&&(a+="@media ".concat(i.media," {"));var o=void 0!==i.layer;o&&(a+="@layer".concat(i.layer.length>0?" ".concat(i.layer):""," {")),a+=i.css,o&&(a+="}"),i.media&&(a+="}"),i.supports&&(a+="}");var s=i.sourceMap;s&&"undefined"!=typeof btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),t.styleTagTransform(a,e,t.options)}(t,e,i)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},1113:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},6831:(e,t)=>{var i;Object.defineProperty(t,"__esModule",{value:!0}),function(e){class t{constructor(){this.tags={}}}let i;function a(e){let t={},i=e.text.split("\n");for(let e of i){let i=o(e);i&&(t[i.key]=i.value)}return t}function o(e){if((e=e.trim()).length>4&&"["===e[0]){let t=e.lastIndexOf("]");if(t>3){let i=e.indexOf(" ");return{key:e.substring(1,i),value:e.substring(i+2,t-1)}}}}e.Game=t,function(e){e[e.Tags=0]="Tags",e[e.Moves=1]="Moves"}(i||(i={})),e.showJSON=function(e){let t='{"games":[';e.forEach((e=>{t+=JSON.stringify(e)+"\n,"})),t=t.slice(0,-1)+"]}";let i=encodeURIComponent(t);document.body.insertAdjacentHTML("beforeend",'<a id="downloadAnchorElem" download="data.json" href="data:text/json;charset=utf-8,'+i+'" style="display:none"></a>');let a=document.getElementById("downloadAnchorElem");a?.click(),a?.remove()},e.convertToGames=function(e){let o=function(e){if(e){let t=[],a=e.split("\r\n\r\n");for(let e of a)e.length>1&&("["===e[0]?t.push({type:i.Tags,text:e}):"1"===e[0]&&t.push({type:i.Moves,text:e}));return t}}(e);if(o){let e=[],s=new t;for(let r of o)r.type===i.Tags?s.tags=a(r):(s.moveText=r.text.split("\r\n").join(" "),e.push(s),s=new t);return e}}}(i||(i={})),t.default=i},6523:function(e,t,i){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=a(i(2137)),s=a(i(694)),r=a(i(9443)),n=a(i(9030)),d=a(i(7761)),c=a(i(8422)),l=a(i(1409)),h=a(i(8995));t.default=class{constructor(e,t,i){this.isRotated=!1,this.isRotated=i,this.svgRoot=l.default.createSVG("0 0 800 800"),e.appendChild(this.svgRoot),this.boardLayer=new o.default(this.svgRoot,i),this.cordsLayer=new s.default(this.svgRoot,i),this.pieceLayer=new r.default(this.svgRoot,i),this.arrowLayer=new n.default(this.svgRoot,i),this.resultsLayer=new h.default(this.svgRoot,i),this.mouseEvents=new d.default(this.svgRoot,this.boardLayer,this.arrowLayer,this.isRotated),this.setFen(t,!1)}rotate(){this.isRotated=!this.isRotated,this.boardLayer.rotate(),this.cordsLayer.rotate(),this.pieceLayer.rotate(),this.arrowLayer.rotate(),this.resultsLayer.rotate(),this.mouseEvents.rotate()}setFen(e,t){if(t&&this.pieceLayer.clear(),""!==e){"start"===e.toLowerCase()&&(e=c.default.startFEN),e=e.split(" ")[0].split("/").join("");let t=0;for(let i=0;i<e.length;i++){let a=e[i],o=parseInt(a);if(isNaN(o)){let e=this.isRotated?63-t:t,i=c.default.getSquareKeyByIndex(e,this.isRotated);this.pieceLayer.addPiece(a,i),t++}else t+=o}}}highlightSource(e){this.boardLayer.highlightSource(e)}highlightTarget(e){this.boardLayer.highlightTarget(e)}clearSourceAndTargetHighlights(){this.boardLayer.clearSourceAndTargetHighlights()}highlightSourceAndTarget(e,t){this.boardLayer.highlightSourceAndTarget(e,t)}showGameResult(e){let t=this.pieceLayer.getKings();this.resultsLayer.showGameResult(e,t)}hideGameResult(){this.resultsLayer.clear()}}},9030:function(e,t,i){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=a(i(8422)),s=a(i(1409));t.default=class{constructor(e,t){this.strokeWidth=20,this.rightClickedSquareKey=null,this.isRotated=!1,this.currentArrows=[],this.svgRoot=e;let i=s.default.createGroup();e.appendChild(i),this.group=i,this.isRotated=t}rotate(){this.isRotated=!this.isRotated,this.group.innerHTML="",this.currentArrows.forEach((e=>{this.drawArrow(e.from,e.to)}))}onRightButtonDown(e){this.rightClickedSquareKey=e}onLeftButtonDown(){this.group.innerHTML="",this.currentArrows=[]}onRightButtonUp(e){this.rightClickedSquareKey&&this.rightClickedSquareKey!==e&&this.drawArrow(this.rightClickedSquareKey,e)}drawArrow(e,t){this.currentArrows.push({from:e,to:t});const i=document.createElementNS("http://www.w3.org/2000/svg","polygon");let a=this.svgRoot.createSVGPoint(),o=this.svgRoot.createSVGPoint(),s=this.svgRoot.createSVGPoint(),r=this.svgRoot.createSVGPoint(),n=this.svgRoot.createSVGPoint(),d=this.svgRoot.createSVGPoint(),c=this.svgRoot.createSVGPoint(),l=this.getRelativeCenter(e),h=this.getRelativeCenter(t),f=Math.sqrt(Math.pow(h.x-l.x,2)+Math.pow(h.y-l.y,2)),g={x:(l.x+h.x)/2,y:(l.y+h.y)/2},u=Math.sqrt(Math.pow(40,2)-Math.pow(20,2));a.x=g.x-f/2+30,a.y=g.y-this.strokeWidth/2,o.x=a.x,o.y=a.y+this.strokeWidth,s.x=o.x+f-u-30,s.y=o.y,r.x=s.x,r.y=s.y+(20-this.strokeWidth/2),n.x=r.x+u,n.y=g.y,d.x=r.x,d.y=r.y-40,c.x=s.x,c.y=s.y-this.strokeWidth;let x=h.x-l.x,N=h.y-l.y,b=180*Math.atan2(N,x)/Math.PI;i.setAttribute("transform","rotate("+b+" "+g.x.toString()+" "+g.y.toString()+")"),i.setAttribute("class","arrow"),i.setAttribute("fill","rgba(255, 170, 0, 0.8)"),i.points.appendItem(a),i.points.appendItem(o),i.points.appendItem(s),i.points.appendItem(r),i.points.appendItem(n),i.points.appendItem(d),i.points.appendItem(c),this.group.appendChild(i)}getRelativeCenter(e){let t=e[0],i=e[1];return{x:100*o.default.getHorizontalIndex(t,this.isRotated)+50,y:100*o.default.getVerticalIndex(i,this.isRotated)+50}}}},2137:function(e,t,i){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=a(i(8422)),s=a(i(1409));t.default=class{constructor(e,t){this.sourceColor="rgba(255, 255, 51, 0.3)",this.targetColor="rgba(255, 255, 51, 0.4)",this.rightClickColor="rgb(235, 97, 80, 0.8)",this.rightClicks={},this.rightClickedSquareKey=null,this.svgRoot=e,this.isRotated=t;let i=s.default.createGroup();this.svgRoot.appendChild(i);let a=["l","d","l","d","l","d","l","d"];[0,1,2,3,4,5,6,7].forEach((e=>{[0,1,2,3,4,5,6,7].forEach(((t,o)=>{i.appendChild(this.createBoardRect(t,e,a[o]))})),a=a.reverse()})),this.sourceTargetGroup=s.default.createGroup(),this.svgRoot.appendChild(this.sourceTargetGroup),this.sourceHighlight={squareKey:"a8",type:"source",rect:s.default.createSquare(0,0,"transparent")},this.targetHighlight={squareKey:"a7",type:"target",rect:s.default.createSquare(1,0,"transparent")},this.sourceTargetGroup.appendChild(this.sourceHighlight.rect),this.sourceTargetGroup.appendChild(this.targetHighlight.rect),this.rightClickGroup=s.default.createGroup(),this.svgRoot.appendChild(this.rightClickGroup)}onLeftButtonDown(){this.clearAllHighlights()}onRightButtonDown(e){this.rightClickedSquareKey=e}onRightButtonUp(e){if(this.rightClickedSquareKey&&this.rightClickedSquareKey===e){let t=this.rightClicks[e];t?(this.rightClickGroup.removeChild(t.rect),this.rightClicks[e]=null):this.createRightClickHighlight(e)}}rotate(){this.isRotated=!this.isRotated,this.setPosition(this.sourceHighlight),this.setPosition(this.targetHighlight),Object.values(this.rightClicks).forEach((e=>{e&&this.setPosition(e)}))}highlightSourceAndTarget(e,t){this.clearAllHighlights(),this.highlightSource(e),this.highlightTarget(t)}highlightSource(e){this.sourceHighlight.squareKey=e,this.sourceHighlight.rect.setAttribute("fill",this.sourceColor),this.setPosition(this.sourceHighlight)}highlightTarget(e){this.targetHighlight.squareKey=e,this.targetHighlight.rect.setAttribute("fill",this.targetColor),this.setPosition(this.targetHighlight)}clearSourceAndTargetHighlights(){this.sourceHighlight.rect.setAttribute("fill","transparent"),this.targetHighlight.rect.setAttribute("fill","transparent")}clearAllHighlights(){this.clearSourceAndTargetHighlights(),this.rightClicks={},this.rightClickGroup.innerHTML=""}createRightClickHighlight(e){let t=o.default.getCordinatesBySquareKey(e,this.isRotated),i=s.default.createSquare(t.x,t.y,this.rightClickColor);this.rightClickGroup.appendChild(i),this.rightClicks[e]={squareKey:e,type:"RightClick",rect:i}}setPosition(e){let t=o.default.getCordinatesBySquareKey(e.squareKey,this.isRotated);e.rect.setAttribute("x",(100*t.x).toString()),e.rect.setAttribute("y",(100*t.y).toString())}createBoardRect(e,t,i){return s.default.createSquare(e,t,"l"===i?"rgb(233,237,204)":"rgb(119,153,84)")}}},694:function(e,t,i){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=a(i(1409));t.default=class{constructor(e,t){this.isRotated=t,this.group=o.default.createGroup(),this.group.classList.add("cords"),this.group.setAttribute("font-family","Helvetica"),this.group.setAttribute("font-weight","bold"),this.group.setAttribute("fill","rgb(30,30,30"),e.append(this.group),this.horizontalGroup=o.default.createGroup(),this.verticalGroup=o.default.createGroup(),this.group.appendChild(this.horizontalGroup),this.group.appendChild(this.verticalGroup),this.horizontalGroup.setAttribute("transform","translate(86, 795.5)"),this.verticalGroup.setAttribute("transform","translate(5, 18)"),this.getHorizontalCords(t).forEach(((e,t)=>{let i=o.default.createGroup();i.setAttribute("transform","translate("+(100*t).toString()+",0)"),this.horizontalGroup.appendChild(i);let a=o.default.createText(e,"scale(0.9)");i.appendChild(a)})),this.getVerticalCords(t).forEach(((e,t)=>{let i=o.default.createGroup();i.setAttribute("transform","translate(0,"+ +(100*t).toString()+")"),this.verticalGroup.appendChild(i);let a=o.default.createText(e,"scale(1)");i.appendChild(a)}))}getHorizontalCords(e){let t=["A","B","C","D","E","F","G","H"];return e?t.reverse():t}getVerticalCords(e){let t=["8","7","6","5","4","3","2","1"];return e?t.reverse():t}rotate(){this.isRotated=!this.isRotated;let e=this.getHorizontalCords(this.isRotated),t=this.getVerticalCords(this.isRotated);Array.from(this.horizontalGroup.children).forEach(((t,i)=>{t.children[0].textContent=e[i]})),Array.from(this.verticalGroup.children).forEach(((e,i)=>{e.children[0].textContent=t[i]}))}}},9443:function(e,t,i){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=a(i(7691)),s=a(i(8422)),r=a(i(1409));t.default=class{constructor(e,t){this.positions={},this.group=r.default.createGroup(),e.appendChild(this.group),this.isRotated=t}clear(){this.positions={},this.group.innerHTML=""}getPiece(e){return this.positions[e]}addPiece(e,t){let i=o.default.get(e,t);return this.group.appendChild(i.element),this.setPosition(i),i}rotate(){this.isRotated=!this.isRotated;let e=Object.values(this.positions);this.positions={},e.forEach((e=>{e&&this.setPosition(e)}))}setPosition(e){let t=e.squareKey;this.positions[t]=e,s.default.setPosition(e.element,t,this.isRotated)}getKings(){let e={};return Object.values(this.positions).forEach((t=>{if(t&&("k"===t.fenChar||"K"===t.fenChar)&&(e[t.fenChar]=t,e.k&&e.K))return e})),e}}},8995:function(e,t,i){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=a(i(1409)),s=a(i(4455)),r=a(i(8422));t.default=class{constructor(e,t){this.kings={},this.svgRoot=e,this.isRotated=t,this.group=o.default.createGroup(),this.svgRoot.appendChild(this.group)}clear(){this.group.innerHTML="",this.gameResult=void 0,this.kings={}}rotate(){this.isRotated=!this.isRotated,this.gameResult&&(this.group.innerHTML="",this.showGameResult(this.gameResult,this.kings))}showGameResult(e,t){if(this.gameResult=e,this.kings=t,"1/2-1/2"===e){let e=o.default.createImage(s.default.draw,0,0,100,100),i=o.default.createImage(s.default.draw,0,0,100,100);this.group.appendChild(e),this.group.appendChild(i),this.showImage(e,t.k.squareKey),this.showImage(i,t.K.squareKey)}else{let i=o.default.createImage(s.default.win,0,0,30,30),a=o.default.createImage(s.default.lose,0,0,40,40);this.group.appendChild(i),this.group.appendChild(a);let r="1-0"===e?"k":"K",n=t["1-0"===e?"K":"k"].squareKey,d=t[r].squareKey;this.showImage(i,n),this.showImage(a,d)}}showImage(e,t){let i=r.default.getCordinatesBySquareKey(t,this.isRotated);e.style.transform=`translate(${12.5*i.x}%, ${12.5*i.y}%)`}}},7761:function(e,t,i){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=a(i(8422));t.default=class{constructor(e,t,i,a){this.svgRoot=e,this.isRotated=a,this.svgRoot.addEventListener("mousedown",(e=>{if(e.button&&2==e.button){let a=o.default.getSquareByCursorPosition(this.svgRoot,e,this.isRotated);t.onRightButtonDown(a),i.onRightButtonDown(a)}else t.onLeftButtonDown(),i.onLeftButtonDown();e.preventDefault()})),this.svgRoot.addEventListener("mouseup",(e=>{if(e.button&&2==e.button){let a=o.default.getSquareByCursorPosition(this.svgRoot,e,this.isRotated);t.onRightButtonUp(a),i.onRightButtonUp(a),e.preventDefault()}})),this.svgRoot.addEventListener("contextmenu",(e=>e.preventDefault()))}rotate(){this.isRotated=!this.isRotated}}},8291:function(e,t,i){var a=this&&this.__createBinding||(Object.create?function(e,t,i,a){void 0===a&&(a=i);var o=Object.getOwnPropertyDescriptor(t,i);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,a,o)}:function(e,t,i,a){void 0===a&&(a=i),e[a]=t[i]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&a(t,e,i);return o(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=s(i(2016)),d=s(i(747)),c=s(i(4244)),l=s(i(7954)),h=s(i(7661)),f=s(i(9616)),g=r(i(1409)),u={};u.p=l.g,u.r=f.g,u.n=c.g,u.b=n.g,u.q=h.g,u.k=d.g;const x={};function N(e,t,i){if(t.transform&&e.setAttribute("transform",t.transform),t.style&&t.style[i]&&e.setAttribute("style",t.style[i]),t.circle&&t.circle.forEach((t=>{let i=g.default.createCircle(t.cx,t.cy,t.r);e.appendChild(i)})),t.path&&t.path.forEach((t=>{if(void 0===t.colorIndex||t.colorIndex===i){let a=g.default.createPath(t.d);t.style&&a.setAttribute("style",t.style[i]),e.appendChild(a)}})),t.g){let a=g.default.createGroup();e.appendChild(a),N(a,t.g,i)}}var b;["p","n","b","r","q","k","P","N","B","R","Q","K"].forEach((e=>{let t=g.default.createGroup(),i=g.default.createGroup();i.classList.add("piece"),t.appendChild(i),N(i,u[e.toLowerCase()],e===e.toLowerCase()?0:1),x[e]=t})),function(e){e.get=function(e){return x[e].cloneNode(!0)}}(b||(b={})),t.default=b},7691:function(e,t,i){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=a(i(8291));var s;!function(e){e.get=function(e,t){return{fenChar:e,element:o.default.get(e),squareKey:t}}}(s||(s={})),t.default=s},1409:(e,t)=>{var i;Object.defineProperty(t,"__esModule",{value:!0}),function(e){function t(e,t,i,a,o){let s=document.createElementNS("http://www.w3.org/2000/svg","rect");return s.setAttribute("x",e.toString()),s.setAttribute("y",t.toString()),s.setAttribute("width",i.toString()),s.setAttribute("height",a.toString()),o&&s.setAttribute("fill",o),s}e.createSVG=function(e){let t=document.createElementNS("http://www.w3.org/2000/svg","svg");return t.setAttribute("viewBox",e),t},e.createGroup=function(){return document.createElementNS("http://www.w3.org/2000/svg","g")},e.createSquare=function(e,i,a){return t(100*e,100*i,100,100,a)},e.createRect=t,e.createCircle=function(e,t,i){let a=document.createElementNS("http://www.w3.org/2000/svg","circle");return a.setAttribute("cx",e),a.setAttribute("cy",t),a.setAttribute("r",i),a},e.createImage=function(e,t,i,a,o){let s=document.createElementNS("http://www.w3.org/2000/svg","image");return s.setAttribute("href",e),s.setAttribute("x",t.toString()),s.setAttribute("y",i.toString()),s.setAttribute("width",a.toString()),s.setAttribute("height",o.toString()),s},e.createText=function(e,t){let i=document.createElementNS("http://www.w3.org/2000/svg","text");return i.setAttribute("transform",t),i.textContent=e,i},e.createPath=function(e){let t=document.createElementNS("http://www.w3.org/2000/svg","path");return t.setAttribute("d",e),t}}(i||(i={})),t.default=i},3671:(e,t)=>{var i;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Download=function(e){let t=document.createElement("canvas");t.height=500,t.width=500;let i=document.createElement("img");i.style.display="none",document.body.prepend(i),i.src=function(e){let t=(new XMLSerializer).serializeToString(e);return"data:image/svg+xml;base64,"+btoa(t)}(e),i.onload=function(){t.getContext("2d").drawImage(i,0,0);var e,a,o;e=t.toDataURL("image/png"),a=new MouseEvent("click",{view:window,bubbles:!1,cancelable:!0}),(o=document.createElement("a")).setAttribute("download","myboard.png"),o.setAttribute("href",e),o.setAttribute("target","_blank"),o.dispatchEvent(a),document.body.removeChild(i)}}}(i||(i={})),t.default=i},8422:(e,t)=>{var i;Object.defineProperty(t,"__esModule",{value:!0}),function(e){const t=["a8","b8","c8","d8","e8","f8","g8","h8","a7","b7","c7","d7","e7","f7","g7","h7","a6","b6","c6","d6","e6","f6","g6","h6","a5","b5","c5","d5","e5","f5","g5","h5","a4","b4","c4","d4","e4","f4","g4","h4","a3","b3","c3","d3","e3","f3","g3","h3","a2","b2","c2","d2","e2","f2","g2","h2","a1","b1","c1","d1","e1","f1","g1","h1"],i=["a","b","c","d","e","f","g","h"],a=["8","7","6","5","4","3","2","1"];function o(e,t,o){let s=o?7-t:t;return i[o?7-e:e]+a[s]}function s(e,t){let a=i.indexOf(e);return t?7-a:a}function r(e,t){let i=a.indexOf(e);return t?7-i:i}function n(e,t){return{x:s(e[0],t),y:r(e[1],t)}}e.startFEN="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",e.getSquareKeyByIndexes=o,e.getSquareKeyByIndex=function(e,i){return t[i?63-e:e]},e.getCurrentIndexOfSquareKey=function(e,i){let a=t.indexOf(e);return i?63-a:a},e.getHorizontalIndex=s,e.getVerticalIndex=r,e.getCordinatesBySquareKey=n,e.setPosition=function(e,t,i){let a=n(t,i);e.style.transform=`translate(${12.5*a.x}%, ${12.5*a.y}%)`},e.getSquareByCursorPosition=function(e,t,i){let a=e.parentElement,s=a.clientWidth/8,r=t.clientX-a.offsetLeft+document.documentElement.scrollLeft,n=t.clientY-a.offsetTop+document.documentElement.scrollTop;return o(Math.floor(r/s),Math.floor(n/s),i)},e.addChild=function(e,t,i,a){let o=document.createElement(t);return o.className=i,a&&(o.innerHTML=a),e.appendChild(o),o}}(i||(i={})),t.default=i},4455:function(e,t,i){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=a(i(4825)),s=a(i(3650)),r=a(i(4307));class n{}n.win=o.default,n.lose=s.default,n.draw=r.default,t.default=n},7259:function(e,t,i){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=a(i(784)),s=a(i(3671));i(8269);const r=a(i(8422));t.default=class{constructor(e,t){this.container=e,this.buttonContainer=r.default.addChild(this.container,"div","game-nav-buttons"),this.addButton("start",o.default.start,(()=>{t.goToMove(-1)})),this.addButton("rewind",o.default.rewind,(()=>t.rewind())),this.addButton("previous",o.default.previous,(()=>t.previous())),this.addButton("play",o.default.play,(()=>t.play())),this.addButton("pause",o.default.pause,(()=>t.pause())),this.addButton("next",o.default.next,(()=>t.next())),this.addButton("forward",o.default.forward,(()=>t.forward())),this.addButton("end",o.default.end,(()=>{t.goToMove(t.game.moves.length-1)})),this.addButton("rotate",o.default.rotate,(()=>t.rotate())),this.addButton("screenshot",o.default.screenshot,(()=>{s.default.Download(t.chessboard.svgRoot)}))}addButton(e,t,i){let a=document.createElement("img");return a.src=t,a.onclick=i,this.buttonContainer.appendChild(a)}}},2234:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Callbacks=void 0,t.Callbacks=class{}},7804:function(e,t,i){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CapturePieceFactory=void 0;const o=a(i(8291)),s={};var r;["p","n","b","r","q","P","N","B","R","Q"].forEach((e=>{let t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("viewBox","0 0 100 100");let i=o.default.get(e);t.appendChild(i),s[e]=t})),function(e){e.get=function(e){return s[e].cloneNode(!0)}}(r||(t.CapturePieceFactory=r={}))},2671:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getCastling=void 0,t.getCastling=function(e,t,i){if("O"===t.san[0]){let a="w"===t.color?"O-O"===t.san?"h1":"a1":"O-O"===t.san?"h8":"a8",o="w"===t.color?"O-O"===t.san?"f1":"d1":"O-O"===t.san?"f8":"d8";return{rook:e.pieceLayer.getPiece(i?a:o),from:a,to:o}}}},1237:function(e,t,i){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=a(i(6523)),s=a(i(8291)),r=a(i(8422)),n=a(i(7729)),d=i(1542),c=i(2671),l=i(2169),h=i(2234);i(3235),t.default=class{constructor(e,t,i){this.callbacks=new h.Callbacks,this.isResultShowing=!1,this.state="start",this.moveIndex=0,this.shortDelayBetweenMoves=100,this.longDelayBetweenMoves=1e3,this.shortTransitionDuration="100ms",this.longTransitionDuration="1000ms",this.boardContainer=r.default.addChild(e,"div","board"),this.chessboard=new o.default(this.boardContainer,t,i),this.playerInfo=new n.default(e,t,i),this.transitions=new d.Transitions(this.chessboard,i),this.isRotated=i,this.pieceLayer=this.chessboard.pieceLayer,""!==t&&"start"!==t||(t=r.default.startFEN);let a=new l.Chess(t).history({verbose:!0});this.game={blackPlayer:"Black player",whitePlayer:"White player",moves:a}}addMove(e){this.game.moves.push(e),this.moveIndex=this.game.moves.length-1,this.callbacks.onMoveAdded&&this.callbacks.onMoveAdded(e,this.game.moves.length-1)}rotate(){this.isRotated=!this.isRotated;let e=this.state;this.state="pause","play"===e||"forward"===e?this.move(!1):"rewind"===e&&this.move(!0),this.chessboard.rotate(),this.playerInfo.rotate(),this.transitions.rotate(),this.state=e,"play"===e||"forward"===e?this.move(!0):"rewind"===e&&this.move(!1)}loadGame(e){this.state="pause",this.transitions.current&&this.transitions.cancel(),this.chessboard.clearSourceAndTargetHighlights(),this.game=e,this.chessboard.setFen(r.default.startFEN,!0),this.playerInfo.setPlayerNames(e.blackPlayer,e.whitePlayer),this.playerInfo.setScoreAndCaputereByFen(r.default.startFEN),this.moveIndex=-1,this.state="start",this.hideGameResult(),this.callbacks.onGameLoaded&&this.callbacks.onGameLoaded(this.game.moves)}rewind(){this.state="rewind",this.move(!1)}previous(){"play"!==this.state&&"forward"!==this.state||(this.state="pause"),this.move(!1)}play(){this.state="play",this.move(!0)}pause(){this.state="pause"}next(){"rewind"===this.state&&(this.state="pause"),this.move(!0)}forward(){this.state="forward",this.move(!0)}goToMove(e){if(this.hideGameResult(),clearTimeout(this.timeoutId),this.transitions.current&&this.transitions.cancel(),this.moveIndex=e,-1===e){this.state="start";let e=this.game.moves[0];this.chessboard.setFen(e.before,!0),this.playerInfo.setScoreAndCaputereByFen(e.before),this.chessboard.clearSourceAndTargetHighlights()}else{let t=this.game.moves[e];this.chessboard.setFen(t.after,!0),this.playerInfo.setScoreAndCaputereByFen(t.after),this.chessboard.highlightSourceAndTarget(t.from,t.to);let i=(0,c.getCastling)(this.chessboard,t,!0);i&&this.chessboard.highlightSource(i.to),e===this.game.moves.length-1?(this.state="end",this.showGameResult()):this.state="pause"}this.callbacks.onGoToMove&&this.callbacks.onGoToMove(e)}async move(e){if(e&&this.moveIndex===this.game.moves.length-1||this.hideGameResult(),clearTimeout(this.timeoutId),this.transitions.current){let t=this.transitions.current,i=t.piece,a=t.move,o=t.castling;if(this.transitions.cancel(),e===t.isForward)this.finishMove(e,i,a,o);else if(e){if(a.captured&&(this.removePieceBySquareKey(a.to),this.playerInfo.addCapture(a),this.pieceLayer.setPosition(i)),a.promotion){let e="b"===a.color?a.promotion:a.promotion.toUpperCase();this.promoteOrUnpromote(i,e)}"play"!==this.state&&"forward"!==this.state||this.move(!0)}else this.moveIndex--,"rewind"===this.state&&this.move(!1)}else{if(e&&this.moveIndex===this.game.moves.length-1)return void(this.state="end");if(!e&&-1===this.moveIndex)return this.chessboard.clearSourceAndTargetHighlights(),void(this.state="start");e&&this.moveIndex++,this.callbacks.onMoveStart&&this.callbacks.onMoveStart(this.moveIndex);let t=this.game.moves[this.moveIndex],i=this.pieceLayer.getPiece(e?t.from:t.to);this.putOnTop(i);let a=(0,c.getCastling)(this.chessboard,t,e);if(a&&this.putOnTop(a.rook),e)this.chessboard.highlightSource(t.from),a&&this.chessboard.highlightTarget(a.from);else if(this.chessboard.highlightTarget(t.to),a)this.chessboard.highlightSource(a.to);else{if(t.captured){this.removeFromPositionRecord(t.to);let e="b"===t.color?t.captured.toUpperCase():t.captured;this.pieceLayer.addPiece(e,t.to),this.playerInfo.undoCapture(t)}if(t.promotion){let e="b"===t.color?t.piece:t.piece.toUpperCase();this.pieceLayer.group.removeChild(i.element),i.element=s.default.get(e),this.pieceLayer.group.appendChild(i.element),r.default.setPosition(i.element,t.to,this.isRotated)}}let o={isForward:e,piece:i,move:t,castling:a},n="play"===this.state?this.longTransitionDuration:this.shortTransitionDuration;await this.transitions.move(o,n,(()=>{this.finishMove(e,i,t,a)}))}}finishMove(e,t,i,a){let o=e?i.from:i.to,s=e?i.to:i.from;if(t.squareKey=s,a)a.rook.squareKey=e?a.to:a.from,this.removeFromPositionRecord(o),this.removeFromPositionRecord(e?a.from:a.to),this.pieceLayer.setPosition(t),this.pieceLayer.setPosition(a.rook),this.chessboard.highlightSource(e?a.to:a.from),this.chessboard.highlightTarget(e?i.to:i.from);else if(e){if(i.captured&&(this.removePieceBySquareKey(i.to),this.playerInfo.addCapture(i)),i.promotion){let e="b"===i.color?i.promotion:i.promotion.toUpperCase();this.promoteOrUnpromote(t,e),this.playerInfo.setScoreAndCaputereByFen(i.after)}this.removeFromPositionRecord(i.from),this.pieceLayer.setPosition(t),this.chessboard.highlightTarget(i.to)}else i.captured||this.removeFromPositionRecord(i.to),this.pieceLayer.setPosition(t),this.chessboard.highlightSource(i.from);e||this.moveIndex--,this.callbacks.onMoveEnd&&this.callbacks.onMoveEnd(this.moveIndex,i,e),this.moveIndex===this.game.moves.length-1?this.showGameResult():"play"!==this.state&&"forward"!==this.state&&"rewind"!==this.state||(this.timeoutId=setTimeout((()=>{"play"!==this.state&&"forward"!==this.state&&"rewind"!==this.state||this.move(e)}),"play"===this.state?this.longDelayBetweenMoves:this.shortDelayBetweenMoves))}showGameResult(){this.game.result&&(this.chessboard.showGameResult(this.game.result),this.isResultShowing=!0)}hideGameResult(){this.isResultShowing&&(this.isResultShowing=!1,this.chessboard.hideGameResult())}putOnTop(e){this.pieceLayer.group.appendChild(e.element)}removeFromPositionRecord(e){this.pieceLayer.positions[e]=void 0}removePieceBySquareKey(e){let t=this.pieceLayer.positions[e];return this.pieceLayer.group.removeChild(t.element),this.pieceLayer.positions[e]=void 0,t}promoteOrUnpromote(e,t){this.pieceLayer.group.removeChild(e.element),e.element=s.default.get(t),this.pieceLayer.group.appendChild(e.element),e.fenChar=t}}},7729:function(e,t,i){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=i(7804),s=a(i(8422)),r={p:1,n:3,b:3,r:5,q:9,k:0,P:-1,N:-3,B:-3,R:-5,Q:-9,K:0};t.default=class{constructor(e,t,i){this.whiteCaptures={},this.blackCaptures={},this.container=e,this.isRotated=i,this.containerAbove=s.default.addChild(this.container,"div","above"),this.container.insertBefore(this.containerAbove,this.container.firstChild),this.containerBelow=s.default.addChild(this.container,"div","below"),this.blackPlayer=s.default.addChild(i?this.containerBelow:this.containerAbove,"div","player black"),this.whitePlayer=s.default.addChild(i?this.containerAbove:this.containerBelow,"div","player white");let a=s.default.addChild(this.blackPlayer,"div","captures"),o=s.default.addChild(this.whitePlayer,"div","captures"),r=[this.whiteCaptures,this.blackCaptures];[o,a].forEach(((e,t)=>{["p","n","b","r","q"].forEach((i=>{let a=s.default.addChild(e,"span",i);r[t][i]=a}))})),this.whiteScore=s.default.addChild(this.whitePlayer,"span","score"),this.blackScore=s.default.addChild(this.blackPlayer,"span","score"),this.whitePlayerName=s.default.addChild(this.whitePlayer,"div","name","White"),this.blackPlayerName=s.default.addChild(this.blackPlayer,"div","name","Black"),t&&this.setScoreAndCaputereByFen(t)}rotate(){this.isRotated=!this.isRotated,this.containerAbove.appendChild(this.isRotated?this.whitePlayer:this.blackPlayer),this.containerBelow.appendChild(this.isRotated?this.blackPlayer:this.whitePlayer)}addCapture(e){let t=this.getComputedCapture(e);this.addComputedCapture(t),this.setScoreByFen(e.after)}undoCapture(e){let t=this.getComputedCapture(e),i=t.toLowerCase(),a=t===i?this.whiteCaptures[i]:this.blackCaptures[i];a.removeChild(a.firstChild),this.setScoreByFen(e.before)}setPlayerNames(e,t){this.blackPlayerName.innerHTML=e,this.whitePlayerName.innerHTML=t}setScoreAndCaputereByFen(e){if(Object.values(this.whiteCaptures).concat(Object.values(this.blackCaptures)).forEach((e=>{e.innerHTML=""})),"start"===e||""===e)this.setScore(0);else{let t=this.getCapturesByFen(e);Object.entries(t).forEach((([e,t])=>{if(t>0)for(let i=0;i<t;i++)this.addComputedCapture(e)})),this.setScoreByFen(e)}}addComputedCapture(e){let t=e.toLowerCase(),i=o.CapturePieceFactory.get(e);(e===t?this.whiteCaptures[t]:this.blackCaptures[t]).appendChild(i)}setScoreByFen(e){e=e.split(" ")[0].split("/").join("");let t=0;for(const i of e)isNaN(parseInt(i))&&(t-=r[i]);this.setScore(t)}setScore(e){let t=0===e?"":e>0?"+":"-",i=0===e?"":e>0?"-":"+";this.whiteScore.innerHTML=0===e?"":t+Math.abs(e),this.blackScore.innerHTML=0===e?"":i+Math.abs(e)}getComputedCapture(e){let t=e.captured,i="b"===e.color?t.toUpperCase():t;if("p"!==t){let a=0,o=e.after.split(" ")[0].split("/").join("");for(const e of o)isNaN(parseInt(e))&&e===i&&a++;(a>=2||"q"===t&&a>=1)&&(i="b"===e.color?"P":"p")}return i}getCapturesByFen(e){e=e.split(" ")[0].split("/").join("");let t={};["p","n","b","r","q","P","N","B","R","Q"].forEach((e=>{t[e]=0}));for(const i of e)isNaN(parseInt(i))&&(t[i]+=1);let i={};for(const e of["r","n","b","R","N","B"])i[e]=t[e]>=2?0:2-t[e];for(const e of["q","Q"])i[e]=t[e]>0?0:1;let a={pawn:"p",queen:"q",pieces:["r","n","b"]},o={pawn:"P",queen:"Q",pieces:["R","N","B"]};for(const e of[a,o]){i[e.pawn]=8-t[e.pawn],t[e.queen]>1&&(i[e.pawn]-=t[e.queen]-1);for(const a of e.pieces)t[a]>2&&(i[e.pawn]-=t[a]-2)}return i}}},1542:function(e,t,i){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Transitions=void 0;const o=a(i(8422));t.Transitions=class{constructor(e,t){this.chessboard=e,this.isRotated=t}rotate(){this.isRotated=!this.isRotated}cancel(){if(this.current){this.removeTransition(this.current.piece);let e=this.current.castling;e&&this.removeTransition(e.rook),this.current=void 0}}async move(e,t,i){this.makeChromeHappy(),this.current=e,e.piece.element.ontransitionend=()=>{this.removeTransition(e.piece),e.castling&&this.removeTransition(e.castling.rook),this.current=void 0,i()},this.startTransition(e.isForward,t,e.piece.element,e.move.from,e.move.to),e.castling&&this.startTransition(e.isForward,t,e.castling.rook.element,e.castling.from,e.castling.to)}makeChromeHappy(){document.documentElement.offsetHeight}startTransition(e,t,i,a,s){i.style.transform="",i.style.transitionProperty="transform",i.style.transitionDuration=t;let r=e?s:a,n=o.default.getCordinatesBySquareKey(r,this.isRotated);i.style.transform=`translate(${12.5*n.x}%, ${12.5*n.y}%)`}removeTransition(e){e.element.style.transitionProperty="",e.element.style.transitionDuration="",o.default.setPosition(e.element,e.squareKey,this.isRotated),e.element.ontransitioncancel=null,e.element.ontransitionend=null}}},784:function(e,t,i){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=a(i(8750)),s=a(i(2891)),r=a(i(125)),n=a(i(4388)),d=a(i(2492)),c=a(i(3589)),l=a(i(9221)),h=a(i(7765)),f=a(i(6275)),g=a(i(4218));class u{}u.start=o.default,u.rewind=s.default,u.previous=r.default,u.play=n.default,u.pause=d.default,u.next=c.default,u.forward=l.default,u.end=h.default,u.rotate=f.default,u.screenshot=g.default,t.default=u},964:function(e,t,i){var a=this&&this.__createBinding||(Object.create?function(e,t,i,a){void 0===a&&(a=i);var o=Object.getOwnPropertyDescriptor(t,i);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,a,o)}:function(e,t,i,a){void 0===a&&(a=i),e[a]=t[i]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&a(t,e,i);return o(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=i(2169),d=r(i(6831)),c=r(i(1237)),l=r(i(7259)),h=s(i(9996));i(2339),i(6776);let f=document.getElementById("game-navigator"),g=new c.default(f,"start",!1);new l.default(f,g);let u=document.getElementById("file-upload"),x=h.games;function N(e){let t=document.getElementById("menu").getElementsByClassName("items")[0];t.innerHTML="",e.forEach((e=>{let i=document.createElement("div");t.appendChild(i),i.onclick=b,Object.entries(e.tags).forEach((([e,t])=>{let a=document.createElement("div");a.innerHTML=e+": "+t,i.appendChild(a)}))})),t.children&&R(t.children[0])}function b(e){let t=e.currentTarget;Array.from(t.parentElement.children).forEach((e=>{e.classList.remove("active")})),t.classList.add("active"),R(t)}function R(e){if(void 0===x)return;e.classList.add("active");let t=[...e.parentNode.children].indexOf(e),i=x[t],a=new n.Chess;a.loadPgn(i.moveText);let o={moves:a.history({verbose:!0}),whitePlayer:i.tags.White||"White",blackPlayer:i.tags.Black||"Black",result:i.tags.Result};g.loadGame(o),g.play()}N(x),u.addEventListener("change",(()=>{const e=new FileReader;e.addEventListener("load",(()=>{let t=e.result;t&&"string"==typeof t&&(x=d.default.convertToGames(t),x&&(x.reverse(),x.sort(((e,t)=>t.tags.Date.localeCompare(e.tags.Date))),d.default.showJSON(x.slice(0,50)),N(x)))}),!1),u.files&&u.files[0]&&e.readAsText(u.files[0])}))},2016:e=>{e.exports=JSON.parse('{"g":{"g":{"transform":"scale(2) translate(2,3.6)","g":{"style":["fill:#000000; stroke:#000000; stroke-linecap:butt;","fill:#ffffff; stroke:#000000; stroke-linecap:butt;"],"path":[{"d":"M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.65,38.99 6.68,38.97 6,38 C 7.35,36.54 9,36 9,36 z"},{"d":"M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z"},{"d":"M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z"}],"g":{"path":[{"d":"M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18","style":["fill:none; stroke:#ffffff; stroke-linejoin:miter;","fill:none; stroke:#000000; stroke-linejoin:miter;"]}],"style":["opacity:1; fill:none; fill-rule:evenodd; fill-opacity:1; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:round; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;transform:translate(4,4.6)","opacity:1; fill:none; fill-rule:evenodd; fill-opacity:1; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:round; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;transform:translate(4,4.6)"]}}}}}')},747:e=>{e.exports=JSON.parse('{"g":{"g":{"transform":"scale(2.15) translate(0.7,-0.4)","style":["fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;","fill:none; fill-rule:evenodd;stroke:#000;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5;transform:translate(2.5,1.5)"],"path":[{"colorIndex":0,"d":"M 22.5,11.63 L 22.5,6","style":["fill:none; stroke:#000000; stroke-linejoin:miter;","stroke-linejoin:miter"]},{"colorIndex":1,"d":"M22.5 11.63V6M20 8h5","style":["","stroke-linejoin:miter"]},{"colorIndex":0,"d":"M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25","style":["fill:#000000;fill-opacity:1; stroke-linecap:butt; stroke-linejoin:miter;","fill:#fff; stroke-linecap:butt; stroke-linejoin:miter"]},{"colorIndex":1,"d":"M22.5 25s4.5-7.5 3-10.5c0 0-1-2.5-3-2.5s-3 2.5-3 2.5c-1.5 3 3 10.5 3 10.5","style":["","fill:#fff;stroke-linecap:butt;stroke-linejoin:miter"]},{"colorIndex":0,"d":"M 12.5,37 C 18,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 20,16 10.5,13 6.5,19.5 C 3.5,25.5 12.5,30 12.5,30 L 12.5,37","style":["fill:#000000; stroke:#000000;","fill:#fff"]},{"colorIndex":1,"d":"M12.5 37c5.5 3.5 14.5 3.5 20 0v-7s9-4.5 6-10.5c-4-6.5-13.5-3.5-16 4V27v-3.5c-2.5-7.5-12-10.5-16-4-3 6 6 10.5 6 10.5v7","style":["","fill:#fff"]},{"colorIndex":0,"d":"M 20,8 L 25,8","style":["fill:none; stroke:#000000; stroke-linejoin:miter;",""]},{"colorIndex":0,"d":"M 32,29.5 C 32,29.5 40.5,25.5 38.03,19.85 C 34.15,14 25,18 22.5,24.5 L 22.5,26.6 L 22.5,24.5 C 20,18 10.85,14 6.97,19.85 C 4.5,25.5 13,29.5 13,29.5","style":["fill:none; stroke:#ffffff;",""]},{"colorIndex":0,"d":"M 12.5,30 C 18,27 27,27 32.5,30 M 12.5,33.5 C 18,30.5 27,30.5 32.5,33.5 M 12.5,37 C 18,34 27,34 32.5,37","style":["fill:none; stroke:#ffffff;",""]},{"colorIndex":1,"d":"M12.5 30c5.5-3 14.5-3 20 0m-20 3.5c5.5-3 14.5-3 20 0m-20 3.5c5.5-3 14.5-3 20 0"}]}}}')},4244:e=>{e.exports=JSON.parse('{"g":{"g":{"transform":"scale(2) translate(2,3)","style":["opacity:1;fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.5;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;transform:translate(6,6.3)","opacity:1; fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;transform:translate(6,6.3)"],"path":[{"d":"M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18","style":["fill:#000000;stroke:#000000;","fill:#ffffff; stroke:#000000;"]},{"d":"M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10","style":["fill:#000000;stroke:#000000;","fill:#ffffff; stroke:#000000;"]},{"d":"M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z","style":["fill:#ffffff;stroke:#ffffff;","fill:#000000; stroke:#000000;"]},{"d":"M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z","style":["fill:#ffffff;stroke:#ffffff;transform:matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)","fill:#000000; stroke:#000000;transform:matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)"]},{"d":"M 24.55,10.4 L 24.1,11.85 L 24.6,12 C 27.75,13 30.25,14.49 32.5,18.75 C 34.75,23.01 35.75,29.06 35.25,39 L 35.2,39.5 L 37.45,39.5 L 37.5,39 C 38,28.94 36.62,22.15 34.25,17.66 C 31.88,13.17 28.46,11.02 25.06,10.5 L 24.55,10.4 z","style":["fill:#ffffff; stroke:none;",""]}]}}}')},7954:e=>{e.exports=JSON.parse('{"g":{"g":{"transform":"scale(2.2) translate(0,0)","path":[{"d":"m 22.5,9 c -2.21,0 -4,1.79 -4,4 0,0.89 0.29,1.71 0.78,2.38 C 17.33,16.5 16,18.59 16,21 c 0,2.03 0.94,3.84 2.41,5.03 C 15.41,27.09 11,31.58 11,39.5 H 34 C 34,31.58 29.59,27.09 26.59,26.03 28.06,24.84 29,23.03 29,21 29,18.59 27.67,16.5 25.72,15.38 26.21,14.71 26.5,13.89 26.5,13 c 0,-2.21 -1.79,-4 -4,-4 z","style":["","fill:#ffffff;stroke:#000000;stroke-width:1.5;"]}]}}}')},7661:e=>{e.exports=JSON.parse('{"g":{"g":{"transform":"scale(1.89) translate(4.1,5.6)","style":["fill:#000000;stroke:#000000;stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;transform:translate(5,7)","fill:#ffffff;stroke:#000000;stroke-width:1.5;stroke-linejoin:round;transform:translate(5,7)"],"path":[{"d":"M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z","style":["stroke-linecap:butt;fill:#000000",""]},{"colorIndex":1,"d":"M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 11,36 11,36 C 9.5,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z"},{"colorIndex":0,"d":"m 9,26 c 0,2 1.5,2 2.5,4 1,1.5 1,1 0.5,3.5 -1.5,1 -1,2.5 -1,2.5 -1.5,1.5 0,2.5 0,2.5 6.5,1 16.5,1 23,0 0,0 1.5,-1 0,-2.5 0,0 0.5,-1.5 -1,-2.5 -0.5,-2.5 -0.5,-2 0.5,-3.5 1,-2 2.5,-2 2.5,-4 -8.5,-1.5 -18.5,-1.5 -27,0 z","style":["",""]},{"d":"M 11.5,30 C 15,29 30,29 33.5,30","style":["fill:none","fill:none"]},{"colorIndex":1,"d":"M 12,33.5 C 18,32.5 27,32.5 33,33.5","style":["","fill:none"]},{"colorIndex":0,"d":"m 12,33.5 c 6,-1 15,-1 21,0","style":["fill:none",""]},{"colorIndex":0,"d":"M 11,38.5 A 35,35 1 0 0 34,38.5","style":["fill:none; stroke:#000000;stroke-linecap:butt;",""]}],"circle":[{"cx":"6","cy":"12","r":"2"},{"cx":"14","cy":"9","r":"2"},{"cx":"22.5","cy":"8","r":"2"},{"cx":"31","cy":"9","r":"2"},{"cx":"39","cy":"12","r":"2"}],"g":{"style":["fill:none; stroke:#ffffff;",""],"path":[{"colorIndex":0,"d":"M 11,29 A 35,35 1 0 1 34,29"},{"colorIndex":0,"d":"M 12.5,31.5 L 32.5,31.5"},{"colorIndex":0,"d":"M 11.5,34.5 A 35,35 1 0 0 33.5,34.5"},{"colorIndex":0,"d":"M 10.5,37.5 A 35,35 1 0 0 34.5,37.5"}]}}}}')},9616:e=>{e.exports=JSON.parse('{"g":{"g":{"transform":"scale(2) translate(2,3)","style":["opacity:1; fill:#000000; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;transform:translate(6,6.3)","opacity:1; fill:#ffffff; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;transform:translate(6,6.3)"],"path":[{"d":"M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z","style":["stroke-linecap:butt;","stroke-linecap:butt;"]},{"d":"M 12.5,32 L 14,29.5 L 31,29.5 L 32.5,32 L 12.5,32 z","colorIndex":0,"style":["stroke-linecap:butt;",""]},{"d":"M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z","style":["stroke-linecap:butt;","stroke-linecap:butt;"]},{"d":"M 14,29.5 L 14,16.5 L 31,16.5 L 31,29.5 L 14,29.5 z","colorIndex":0,"style":["stroke-linecap:butt;stroke-linejoin:miter;",""]},{"d":"M 14,16.5 L 11,14 L 34,14 L 31,16.5 L 14,16.5 z","colorIndex":0,"style":["stroke-linecap:butt;",""]},{"d":"M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14 L 11,14 z","style":["stroke-linecap:butt;","stroke-linecap:butt;"]},{"d":"M 12,35.5 L 33,35.5 L 33,35.5","colorIndex":0,"style":["fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;",""]},{"d":"M 13,31.5 L 32,31.5","colorIndex":0,"style":["fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;",""]},{"d":"M 14,29.5 L 31,29.5","colorIndex":0,"style":["fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;",""]},{"d":"M 14,16.5 L 31,16.5","colorIndex":0,"style":["fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;",""]},{"d":"M 11,14 L 34,14","style":["fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;","fill:none; stroke:#000000; stroke-linejoin:miter;"]},{"d":"M 34,14 L 31,17 L 14,17 L 11,14","colorIndex":1},{"d":"M 31,17 L 31,29.5 L 14,29.5 L 14,17","colorIndex":1,"style":["stroke-linecap:butt; stroke-linejoin:miter;"]},{"d":"M 31,29.5 L 32.5,32 L 12.5,32 L 14,29.5","colorIndex":1,"style":[]}]}}}')},9996:e=>{e.exports=JSON.parse('{"games":[{"tags":{"Event":"World Blitz 2023","Site":"Samarkand UZB","Date":"2023.12.30","Round":"21.1","White":"Aronian,L","Black":"Carlsen,M","Result":"1/2-1/2","WhiteElo":"2723","BlackElo":"2830","ECO":"C77"},"moveText":"1.e4 e5 2.Nf3 Nc6 3.Bb5 a6 4.Ba4 Nf6 5.Nc3 Be7 6.O-O b5 7.Bb3 d6 8.a4 Rb8 9.axb5 axb5 10.Nd5 O-O 11.Re1 Nxd5 12.Bxd5 Nb4 13.Bb3 c5 14.d3 Qc7 15.Bd2 Nc6 16.h3 Bd7 17.c3 c4 18.Bc2 cxd3 19.Bxd3 Na5 20.Bg5  1/2-1/2"},{"tags":{"Event":"World Blitz 2023","Site":"Samarkand UZB","Date":"2023.12.30","Round":"20.1","White":"Murzin,Volodar","Black":"Carlsen,M","Result":"1/2-1/2","WhiteElo":"2627","BlackElo":"2830","ECO":"D02"},"moveText":"1.d4 d5 2.Nf3 Nf6 3.Bf4 Bf5 4.e3 e6 5.Bd3 Bg6 6.O-O Be7 7.c4 dxc4 8.Bxc4 O-O 9.Nc3 Nbd7 10.Rc1 c6 11.Ne5 Nxe5 12.Bxe5 Nd7 13.Bg3 Nb6 14.Bb3 a5 15.Bc2 Bd6 16.Bxg6 hxg6 17.Bxd6 Qxd6 18.Qb3 Qb4 19.Ne4 Qxb3 20.axb3 Nd5 21.Ra1 b6 22.Rfc1 Rfc8 23.Nd6 Rc7 24.Nc4 Rb8 25.h4 c5 26.dxc5 Rxc5 27.Nd6 Rxc1+ 28.Rxc1 Nf6 29.Rc7 Ne8 30.Nxe8 Rxe8 31.Rb7 Rd8 32.Rxb6 Rd1+ 33.Kh2 Rd2 34.Kg3 Rxb2 35.Ra6 Rxb3 36.Rxa5  1/2-1/2"},{"tags":{"Event":"World Blitz 2023","Site":"Samarkand UZB","Date":"2023.12.30","Round":"19.1","White":"Carlsen,M","Black":"Rapport,R","Result":"1-0","WhiteElo":"2830","BlackElo":"2731","ECO":"C01"},"moveText":"1.e4 e6 2.d4 d5 3.exd5 exd5 4.Nf3 Bd6 5.h3 Ne7 6.c4 c6 7.Nc3 O-O 8.Bd3 dxc4 9.Bxc4 Nd7 10.O-O Nb6 11.Bb3 Ned5 12.Bg5 f6 13.Bd2 Be6 14.Re1 Bf7 15.Ne4 Re8 16.a4 a5 17.Nxd6 Qxd6 18.Rxe8+ Bxe8 19.Qe1 Bh5 20.Nh4 Re8 21.Qc1 Ra8 22.Nf5 Qd7 23.Qc5 Kh8 24.Ng3 Bf7 25.Bxa5 Nc8 26.Re1 Nd6 27.Bb4 Nxb4 28.Qxb4 Bxb3 29.Qxb3 b5 30.Qe6 Qd8 31.axb5 cxb5 32.Ne4 Nxe4 33.Rxe4 h6 34.g3 Ra1+ 35.Kg2 Rd1 36.Qc6 Kh7 37.Qc2 Qd5 38.f3 f5 39.Qxd1 fxe4 40.Qc2 Kh8 41.Qxe4 Qb3 42.Qe2 b4 43.Qd2 Kg8 44.d5 Kf7 45.d6 Ke8 46.Qe2+ Kd7 47.Qe7+ Kc6 48.Qc7+ Kb5 49.h4 Qxb2+ 50.Kh3 Qe5 51.Qb7+ Kc5 52.d7 Qe6+ 53.g4 Qf6 54.Qc7+ Kb5 55.Kg3 Qa1 56.d8=Q Qg1+ 57.Kf4  1-0"},{"tags":{"Event":"World Blitz 2023","Site":"Samarkand UZB","Date":"2023.12.30","Round":"18.1","White":"Duda,J","Black":"Carlsen,M","Result":"0-1","WhiteElo":"2732","BlackElo":"2830","ECO":"C88"},"moveText":"1.e4 e5 2.Nf3 Nc6 3.Bb5 a6 4.Ba4 Nf6 5.O-O Be7 6.Re1 b5 7.Bb3 O-O 8.a4 b4 9.d4 d6 10.dxe5 dxe5 11.Nbd2 Bc5 12.h3 Qe7 13.a5 h6 14.Qe2 Be6 15.Bxe6 Qxe6 16.Nb3 Ba7 17.Be3 Bxe3 18.Qxe3 Rfd8 19.Qe2 Nh5 20.Nc5 Nf4 21.Nxe6 Nxe2+ 22.Kf1 Ng3+ 23.fxg3 fxe6 24.Red1 Kf7 25.Ke2 Rxd1 26.Rxd1 Ke7 27.g4 Rb8 28.Ke3 Rb5 29.g5 hxg5 30.Nxg5 b3 31.Rc1 Nxa5 32.Nf3 Nc4+ 33.Ke2 bxc2 34.Rxc2 Rxb2 35.Rxb2 Nxb2 36.Nxe5 Kd6 37.Nf7+ Ke7 38.Ne5 Na4 39.h4 Nc5 40.Ke3 Nd7 41.Nc4 e5 42.g4 Ke6 43.g5 g6 44.Kf3 Nc5 45.Na5 Nd3 46.Ke3 Nf4 47.Kf3 c5 48.Nc4 Nd3 49.Ke3 Nb4 50.Na5 Nc2+ 51.Kd3 Nd4 52.Nb7 Nf3 53.Nxc5+ Kd6 54.Nxa6 Nxh4 55.Ke3 Ng2+ 56.Kf3 Nf4 57.Nb8 Ne6 58.Na6 Nxg5+ 59.Ke3 Ne6 60.Nb4 Nc5 61.Nd5 Ke6 62.Kf3 Kf7 63.Ke3 Kg7 64.Ne7 Kf6 65.Nc6 Ne6 66.Kf2 Nd4 67.Nb4 Nb5 68.Nd3 Nd6 69.Kf3 Nf7 70.Nc5 Kg5 71.Kg3 Nd6 72.Kf3 Kh4 73.Nd7 Nf7 74.Nf6 Kh3 75.Kf2 g5 76.Nh5 Kg4 77.Nf6+ Kf4 78.Kg2 Nd6 79.Nh5+ Kxe4 80.Kg3 Kf5 81.Ng7+ Kf6  0-1"},{"tags":{"Event":"World Blitz 2023","Site":"Samarkand UZB","Date":"2023.12.30","Round":"17.1","White":"Carlsen,M","Black":"Yu Yangyi","Result":"1-0","WhiteElo":"2830","BlackElo":"2714","ECO":"C42"},"moveText":"1.e4 e5 2.Nf3 Nf6 3.Nxe5 d6 4.Nf3 Nxe4 5.h3 d5 6.d3 Nd6 7.c4 Be7 8.cxd5 O-O 9.Nc3 b5 10.a3 Bb7 11.d4 a6 12.Be2 Nd7 13.Ne5 Bf6 14.Nc6 Bxc6 15.dxc6 Nb6 16.O-O Nf5 17.d5 Bxc3 18.bxc3 Nxd5 19.Bf3 Nb6 20.Bf4 Nd6 21.Bxd6 Qxd6 22.Qxd6 cxd6 23.Rfd1 Rad8 24.Rd4 d5 25.a4 Nxa4 26.c4 dxc4 27.Rxd8 Rxd8 28.c7 Rf8 29.Bb7 c3 30.c8=Q Rxc8 31.Bxc8 b4 32.Bf5 Nc5 33.Ra5 g6 34.Rxc5 gxf5 35.Kf1 a5 36.Ke2 a4 37.Kd3 b3 38.Kxc3  1-0"},{"tags":{"Event":"World Blitz 2023","Site":"Samarkand UZB","Date":"2023.12.30","Round":"16.1","White":"Indjic,A","Black":"Carlsen,M","Result":"0-1","WhiteElo":"2589","BlackElo":"2830","ECO":"E40"},"moveText":"1.d4 Nf6 2.c4 e6 3.Nc3 Bb4 4.e3 d5 5.a3 Be7 6.Nf3 O-O 7.b4 b6 8.cxd5 exd5 9.Bb2 a6 10.Bd3 Bd6 11.Ne5 c5 12.bxc5 bxc5 13.O-O c4 14.Bc2 Nbd7 15.f4 Rb8 16.Ra2 Nb6 17.Ba1 Qe7 18.e4 Bb7 19.exd5 Nbxd5 20.Qe1 Bxa3 21.Qh4 Ne3 22.Re1 Nxc2 23.Rxc2 Qe6 24.Qf2 Qf5 25.h3 h5 26.Kh2 Bb4 27.Rb1 Bxc3 28.Bxc3 Ne4 29.Qf1 Nxc3 30.Rxc3 Bxg2 31.Kxg2 Rxb1 32.Qxc4 Qxf4 33.Rf3 Rb2+ 34.Kf1 Qd2  0-1"},{"tags":{"Event":"World Blitz 2023","Site":"Samarkand UZB","Date":"2023.12.30","Round":"15.1","White":"Carlsen,M","Black":"Erigaisi,Arjun","Result":"1-0","WhiteElo":"2830","BlackElo":"2727","ECO":"B40"},"moveText":"1.e4 c5 2.Nf3 e6 3.d3 Nc6 4.g3 d5 5.Nbd2 Nf6 6.Bg2 Be7 7.O-O Qc7 8.a4 h6 9.Re1 O-O 10.Qe2 b6 11.e5 Nh7 12.Nf1 Ba6 13.h4 Nb4 14.Qd1 Kh8 15.Bf4 d4 16.Bd2 Rad8 17.b3 Bb7 18.Bxb4 cxb4 19.N3d2 Bxg2 20.Kxg2 Rc8 21.Nc4 a6 22.Ra2 b5 23.Ncd2 Rfd8 24.axb5 axb5 25.Qf3 Kg8 26.Qe4 Nf8 27.Nf3 Bc5 28.N1d2 Nd7 29.Rea1 Bb6 30.g4 Nc5 31.Qf4 f6 32.Ne4 Rf8 33.Nxc5 Bxc5 34.Ra6 fxe5 35.Qxe5 Qb7 36.Qxe6+ Rf7 37.Qxc8+ Qxc8 38.Ra8 Rf8 39.Rxc8 Rxc8 40.Ra5 Be7 41.Rxb5 Rxc2 42.Nxd4 Rc3 43.Nf5 Bf8 44.d4 Rxb3 45.g5 hxg5 46.hxg5 g6 47.Nh4 Be7 48.Nxg6 Bd6 49.Rb6 Bc7 50.Rc6 Rc3 51.Rf6 b3 52.Ne7+ Kg7 53.Nd5 Rc1 54.Nxc7 b2 55.Ne6+ Kg8 56.Rf8+ Kh7 57.Rb8 b1=Q 58.Rxb1 Rxb1 59.Kf3 Kg6 60.Kf4 Rb5 61.Ke4 Rb1 62.d5 Re1+ 63.Kf4 Re2 64.f3 Re1 65.Nd4 Rd1 66.Nc6 Kf7 67.Ke5 Re1+ 68.Kf5 Rd1 69.Ne5+ Ke7 70.g6 Rxd5 71.g7 Rxe5+ 72.Kxe5 Kf7 73.g8=Q+ Kxg8 74.Kf6  1-0"},{"tags":{"Event":"World Blitz 2023","Site":"Samarkand UZB","Date":"2023.12.30","Round":"14.1","White":"Carlsen,M","Black":"Sarana,A","Result":"1-0","WhiteElo":"2830","BlackElo":"2688","ECO":"B50"},"moveText":"1.e4 c5 2.Nf3 d6 3.Nc3 Nf6 4.Be2 a6 5.O-O b5 6.d4 cxd4 7.Nxd4 Bb7 8.Bf3 Nbd7 9.a4 bxa4 10.Rxa4 e6 11.Rb4 Nc5 12.Rxb7 Nxb7 13.e5 dxe5 14.Bc6+ Nd7 15.Nxe6 fxe6 16.Qh5+ Ke7 17.Bxb7 Rb8 18.Rd1 Qc7 19.Bxa6 Nf6 20.Qe2 Kf7 21.Ne4 Nxe4 22.Qxe4 Be7 23.Bd3 Rb4 24.Qf3+ Bf6 25.c3 Ra4 26.Bc2 Ra1 27.g3 Rd8 28.Re1 h6 29.Kg2 Qd7 30.h4 Ke7 31.Be4 Qb5 32.g4 Bxh4 33.Bg5+ hxg5 34.Rxa1 Rd2 35.Ra7+ Rd7 36.Bc6  1-0"},{"tags":{"Event":"World Blitz 2023","Site":"Samarkand UZB","Date":"2023.12.30","Round":"13.1","White":"Vachier Lagrave,M","Black":"Carlsen,M","Result":"1-0","WhiteElo":"2731","BlackElo":"2830","ECO":"B33"},"moveText":"1.e4 c5 2.Nf3 Nc6 3.d4 cxd4 4.Nxd4 Nf6 5.Nc3 e5 6.Ndb5 d6 7.Nd5 Nxd5 8.exd5 Ne7 9.a4 Ng6 10.a5 Be7 11.Be3 O-O 12.Bxa7 Bd7 13.Bb6 Qc8 14.Ra3 Bxb5 15.Bxb5 Bd8 16.Bxd8 Rxd8 17.O-O Qc5 18.c4 Qb4 19.Qa1 Nf4 20.Re1 Qd2 21.Kf1 e4 22.Qc1 Qxc1 23.Rxc1 Nd3 24.Rxd3 exd3 25.b4 Rac8 26.Rd1 Rc7 27.Rxd3 Re7 28.Re3 Kf8 29.Ke2 f5 30.Kd3 Rxe3+ 31.fxe3 Ke7 32.Kd4 Rf8 33.c5 f4 34.e4 f3 35.gxf3 Rf4 36.a6 bxa6 37.Bxa6 g5 38.b5 g4 39.b6 dxc5+ 40.Kxc5 gxf3 41.d6+ Kd7 42.Bb5+ Ke6 43.Bc4+ Ke5 44.b7 Rf8 45.d7 f2 46.Kc6 Kd4 47.Bf1  1-0"},{"tags":{"Event":"World Blitz 2023","Site":"Samarkand UZB","Date":"2023.12.30","Round":"12.1","White":"Nepomniachtchi,I","Black":"Carlsen,M","Result":"1/2-1/2","WhiteElo":"2771","BlackElo":"2830","ECO":"B15"},"moveText":"1.e4 c6 2.d4 d5 3.Nc3 dxe4 4.Nxe4 Nf6 5.Nxf6+ exf6 6.Be3 Na6 7.a3 Bd6 8.Bd3 O-O 9.Ne2 Re8 10.O-O Bg4 11.Qd2 Nc7 12.c4 Bxe2 13.Bxe2 f5 14.c5 Be7 15.Bf3 Bf6 16.Rad1 Nd5 17.Bf4 Nxf4 18.Qxf4 Qe7 19.b4 g6 20.d5 cxd5 21.Bxd5 Rad8 22.g3 Kg7 23.Qc4 h5 24.h4 Rd7 25.Kg2 Qe5 26.Bf3 Ree7 27.b5 Rd4 28.Rxd4 Qxd4 29.Qxd4 Bxd4 30.c6 bxc6 31.bxc6 Bb6 32.Rd1 Kf6 33.a4 Re5 34.Rd7 Ke6 35.Bd1 Rc5 36.Bb3+ Ke5 37.Bxf7  1/2-1/2"},{"tags":{"Event":"World Blitz 2023","Site":"Samarkand UZB","Date":"2023.12.29","Round":"11.1","White":"Carlsen,M","Black":"Nihal,Sarin","Result":"1/2-1/2","WhiteElo":"2830","BlackElo":"2688","ECO":"B90"},"moveText":"1.e4 c5 2.Nf3 d6 3.d4 cxd4 4.Nxd4 Nf6 5.Nc3 a6 6.Rg1 Nc6 7.g4 g6 8.g5 Nh5 9.Be3 Bg7 10.Be2 Nxd4 11.Bxd4 Bxd4 12.Qxd4 e5 13.Qb4 Nf4 14.O-O-O Be6 15.Bg4 Qxg5 16.Bxe6 Nd3+ 17.Kb1 Nxb4 18.Rxg5 fxe6 19.Rxd6 O-O 20.Rg2 Rad8 21.Rb6 Nc6 22.Rxb7 Rd2 23.Rb6 Nd4 24.Rxa6 Rxc2 25.Rb6 Ra8 26.a4 Kf7 27.Rb7+ Kf6 28.Rxh7 Rb8 29.Nb5 Re2 30.Rh6 Nxb5 31.Rgxg6+ Kf7 32.Rf6+ Kg7 33.Rhg6+ Kh7 34.Rh6+ Kg7 35.Rhg6+ Kh7  1/2-1/2"},{"tags":{"Event":"World Blitz 2023","Site":"Samarkand UZB","Date":"2023.12.29","Round":"10.1","White":"Dubov,Daniil","Black":"Carlsen,M","Result":"1/2-1/2","WhiteElo":"2710","BlackElo":"2830","ECO":"E06"},"moveText":"1.d4 Nf6 2.Nf3 d5 3.c4 e6 4.g3 Be7 5.Bg2 O-O 6.O-O c5 7.cxd5 exd5 8.Nc3 h6 9.b3 Nc6 10.Bb2 Re8 11.Rc1 cxd4 12.Nxd4 Bg4 13.h3 Bd7 14.Kh2 Qa5 15.a3 Nxd4 16.Qxd4 Bxa3 17.Bxa3 Qxa3 18.Nxd5 Nxd5 19.Bxd5  1/2-1/2"},{"tags":{"Event":"World Blitz 2023","Site":"Samarkand UZB","Date":"2023.12.29","Round":"9.1","White":"Carlsen,M","Black":"Bharath,Subramaniyam H","Result":"1-0","WhiteElo":"2830","BlackElo":"2504","ECO":"A06"},"moveText":"1.b3 d5 2.Nf3 Nf6 3.Bb2 c5 4.e3 Nc6 5.Bb5 Bd7 6.O-O a6 7.Bxc6 Bxc6 8.Ne5 Rc8 9.d3 e6 10.Nd2 Be7 11.f4 O-O 12.Rf3 d4 13.Nxc6 Rxc6 14.e4 b5 15.a4 e5 16.Bc1 Nd7 17.Nf1 c4 18.axb5 axb5 19.bxc4 bxc4 20.Ng3 g6 21.Ne2 Qc7 22.f5 cxd3 23.cxd3 Rc8 24.Bd2 Rc2 25.Rf1 Qc6 26.Ng3 Qb5 27.fxg6 hxg6 28.Qf3 Qb3 29.Bh6 Qe6 30.h3 R2c3 31.Ne2 Rc2 32.Kh1 Nc5 33.Ra7 Ra2 34.Rxa2 Qxa2 35.Bd2 Qb3 36.Bb4 Rf8 37.Bxc5 Bxc5 38.Ng1 Qe6 39.Qg3 Rc8 40.Nf3 f6 41.Qxg6+ Kf8 42.Ng5  1-0"},{"tags":{"Event":"World Blitz 2023","Site":"Samarkand UZB","Date":"2023.12.29","Round":"8.1","White":"Sjugirov,S","Black":"Carlsen,M","Result":"1/2-1/2","WhiteElo":"2703","BlackElo":"2830","ECO":"C88"},"moveText":"1.e4 Nc6 2.Nf3 e5 3.Bb5 a6 4.Ba4 Nf6 5.O-O Be7 6.Re1 b5 7.Bb3 O-O 8.a4 Rb8 9.axb5 axb5 10.h3 d6 11.Qe2 Bd7 12.Nc3 Nd4 13.Nxd4 exd4 14.Nd5 Nxd5 15.Bxd5 c6 16.Bb3 Ra8 17.Rxa8 Qxa8 18.d3 Qc8 19.Bd2 Be6 20.Bxe6 Qxe6 21.Ra1 d5 22.Kf1 dxe4 23.Qxe4 Qxe4 24.dxe4 Rb8 25.Ra6 c5 26.Bf4 Rc8 27.Ra5 b4 28.b3 g5 29.Bd2 c4 30.bxc4 Rxc4 31.Ra2 Rc8 32.Ke2 Rb8 33.Kd3 f6 34.f4 gxf4 35.Bxf4 Rb7 36.Kxd4 b3 37.Rb2 Rd7+ 38.Ke3 bxc2 39.Rxc2 Kf7 40.g4 Ra7 41.Rc3 Ke6 42.Kf3 Ra6 43.Rb3 Ra3 44.Rxa3 Bxa3 45.Kg3 Kf7 46.h4 Ke6 47.Kf3 Bc5 48.Bd2 Bd6 49.Bc3 Bc7 50.Bd4 Ba5 51.Be3 Be1 52.h5 Bb4 53.Bf4 Bc5 54.Ke2 Ba3 55.Kd3 Bc5 56.Kc4 Ba3 57.Kd3 Be7 58.Ke3 Bc5+ 59.Kf3 Ba3  1/2-1/2"},{"tags":{"Event":"World Blitz 2023","Site":"Samarkand UZB","Date":"2023.12.29","Round":"7.1","White":"Carlsen,M","Black":"Artemiev,V","Result":"1/2-1/2","WhiteElo":"2830","BlackElo":"2711","ECO":"C89"},"moveText":"1.e4 e5 2.Nf3 Nc6 3.Bb5 a6 4.Ba4 Nf6 5.O-O Be7 6.Re1 b5 7.Bb3 O-O 8.c3 d5 9.exd5 Nxd5 10.d4 exd4 11.cxd4 Bf6 12.Nc3 Nxc3 13.bxc3 Bf5 14.h3 Na5 15.Ba3 Re8 16.Qd2 Nxb3 17.axb3 Qd5 18.Qf4 Rxe1+ 19.Rxe1 Be6 20.b4 Qb3 21.Qc1 Qd5 22.Qf4 Qb3 23.Qc1 Qd5 24.Qf4 Qb3  1/2-1/2"},{"tags":{"Event":"World Blitz 2023","Site":"Samarkand UZB","Date":"2023.12.29","Round":"6.1","White":"Carlsen,M","Black":"Vokhidov,Shamsiddin","Result":"1-0","WhiteElo":"2830","BlackElo":"2596","ECO":"B44"},"moveText":"1.e4 c5 2.Nf3 e6 3.d4 cxd4 4.Nxd4 Nc6 5.c4 Nf6 6.Nc3 Bc5 7.Nc2 O-O 8.Be3 b6 9.Be2 Bb7 10.O-O Qe7 11.Qd2 Rfd8 12.Rfd1 Rac8 13.Bxc5 bxc5 14.Qe3 d6 15.f4 a6 16.Rd2 Qc7 17.Rad1 e5 18.f5 Nd4 19.Bd3 h6 20.Qh3 Bc6 21.Ne3 Qb7 22.Qh4 Qe7 23.Rf1 Rb8 24.g4 Nd5 25.Qxe7 Nxe7 26.h4 Rb7 27.Rg2 Rdb8 28.Rff2 Kf8 29.Kh2 a5 30.Kg3 a4 31.Ned1 Ng8 32.Nb1 Nf6 33.Ndc3 Rb4 34.Na3 Ke7 35.Nc2 Rxb2 36.Nxd4 cxd4 37.Rxb2  1-0"},{"tags":{"Event":"World Blitz 2023","Site":"Samarkand UZB","Date":"2023.12.29","Round":"5.1","White":"Radjabov,T","Black":"Carlsen,M","Result":"0-1","WhiteElo":"2723","BlackElo":"2830","ECO":"C88"},"moveText":"1.e4 e5 2.Nf3 Nc6 3.Bb5 a6 4.Ba4 Nf6 5.O-O Be7 6.Re1 b5 7.Bb3 O-O 8.d3 d6 9.a4 Bd7 10.Bd2 h6 11.h3 Rb8 12.axb5 axb5 13.Nc3 Re8 14.Nd5 Bf8 15.c3 Nxd5 16.Bxd5 Ne7 17.Bb3 Ng6 18.Be3 Be6 19.Bxe6 Rxe6 20.Qb3 Be7 21.Ra7 Nh4 22.Nxh4 Bxh4 23.Rea1 c6 24.g3 Bg5 25.Bxg5 Qxg5 26.Rc7 Rf6 27.Qc2 Qh5 28.Kh2 Qf3 29.Rf1 d5 30.Kg1 Rd8 31.Re7 dxe4 32.dxe4 Qh5 33.Kg2 Qf3+ 34.Kg1 Qh5 35.Kg2 Qg5 36.h4 Rxf2+ 37.Rxf2 Qxe7 38.Qe2 Qe6 39.Qe3 Qg4 40.b4 h5 41.Rf3 f6 42.Rf2 Rd1 43.Rf3 Kh7 44.Qe2 Rc1 45.Qd3 Re1 46.Re3 Qd1 47.Qxd1 Rxd1 48.Kf2 Rd2+ 49.Ke1 Rg2 50.Kf1 Rc2 51.Rd3 Kh6 52.Ke1 Kg6 53.Kf1 Kf7 54.Rd7+ Kf8 55.Rd3 Ke7 56.Ke1 Ke6 57.Kd1 Rg2  0-1"},{"tags":{"Event":"World Blitz 2023","Site":"Samarkand UZB","Date":"2023.12.29","Round":"4.1","White":"Carlsen,M","Black":"Holt,C","Result":"1-0","WhiteElo":"2830","BlackElo":"2540","ECO":"D10"},"moveText":"1.d4 d5 2.c4 c6 3.Nc3 dxc4 4.e3 b5 5.a4 b4 6.Nb1 Ba6 7.Nf3 e6 8.Nbd2 c3 9.bxc3 bxc3 10.Ne4 Bxf1 11.Kxf1 Nf6 12.Nxf6+ gxf6 13.Qb3 Qa5 14.g3 Qd5 15.Qb7 c5 16.Qxd5 exd5 17.dxc5 Bxc5 18.Ba3 Na6 19.Ke2 Rc8 20.Rhc1 Bb4 21.Nd4 Kd7 22.Nb5 c2 23.Bb2 Rc4 24.Bxf6 Rhc8 25.Nxa7 R8c7 26.Nb5 R7c6 27.Bd4 Ba5 28.Ra2 h5 29.h4 Nb4 30.Rb2 Rc8 31.Be5 Ke6 32.Bf4 R8c5 33.Nd4+ Kd7 34.Nb3 Kc6 35.Be5 Bd8 36.Nxc5 Kxc5 37.Bd4+ Kc6 38.Rxb4 Rxb4 39.Rxc2+ Kd7 40.Rc5 Kd6 41.Rc8 Kd7 42.Ra8 Rb3 43.a5 Ra3 44.a6 Ra2+ 45.Kf3 Ba5 46.a7 Be1 47.e4 Ra3+ 48.Ke2  1-0"},{"tags":{"Event":"World Blitz 2023","Site":"Samarkand UZB","Date":"2023.12.29","Round":"3.1","White":"Tsaruk,Maksim","Black":"Carlsen,M","Result":"0-1","WhiteElo":"2460","BlackElo":"2830","ECO":"C00"},"moveText":"1.e4 a6 2.d4 e6 3.Bd3 d5 4.e5 c5 5.c3 Bd7 6.Nf3 cxd4 7.cxd4 Bb5 8.O-O Nc6 9.a3 Nge7 10.Nc3 Bxd3 11.Qxd3 Nf5 12.Bg5 Be7 13.Bxe7 Qxe7 14.Rac1 Nh4 15.Nxh4 Qxh4 16.f4 O-O 17.Rf3 g6 18.Rcf1 Rac8 19.Rh3 Qd8 20.f5 Qb6 21.Rxh7 Kxh7 22.Qh3+ Kg8 23.fxg6 Qxd4+ 24.Kh1 fxg6 25.Qxe6+ Kg7 26.Qd7+ Kh6 27.Qh3+ Kg5 28.Qg3+ Qg4 29.Qe3+ Kh5 30.Rxf8 Rxf8 31.h3 Rf1+  0-1"},{"tags":{"Event":"World Blitz 2023","Site":"Samarkand UZB","Date":"2023.12.29","Round":"2.1","White":"Vakhidov,J","Black":"Carlsen,M","Result":"1/2-1/2","WhiteElo":"2599","BlackElo":"2830","ECO":"A21"},"moveText":"1.c4 e5 2.Nc3 Bb4 3.Nd5 Bc5 4.e3 Nf6 5.b4 Nxd5 6.bxc5 Nf6 7.Bb2 Qe7 8.Nf3 Nc6 9.d4 exd4 10.Nxd4 Nxd4 11.Qxd4 b6 12.Qe5 Qxe5 13.Bxe5 Kd8 14.Bd4 bxc5 15.Bxc5 d6 16.Bd4 c5 17.Bxf6+ gxf6 18.Kd2 Be6 19.Kc3 Kc7 20.Bd3 Rhb8 21.Rab1 Rb6 22.Bxh7 f5 23.e4 Rxb1 24.Rxb1 Rh8 25.Bxf5 Bxf5 26.exf5 Rxh2 27.Rg1 Kc6 28.Kd3 d5 29.cxd5+ Kxd5 30.Kc3 c4 31.Rd1+ Kc5 32.Rd7 Rxg2 33.Rc7+ Kd5 34.Rd7+ Kc5 35.Rc7+ Kd5 36.Rxf7 Rxf2 37.Rxa7 Rxf5 38.Ra5+ Ke6 39.Rxf5 Kxf5 40.Kxc4 Ke6 41.Kb5 Kd7 42.Kb6 Kc8  1/2-1/2"},{"tags":{"Event":"World Blitz 2023","Site":"Samarkand UZB","Date":"2023.12.29","Round":"1.1","White":"Carlsen,M","Black":"Grigoriants,S RUS","Result":"1-0","WhiteElo":"2830","BlackElo":"2544","ECO":"C77"},"moveText":"1.e4 e5 2.Nf3 Nc6 3.Bb5 a6 4.Ba4 Nf6 5.d3 Bc5 6.c3 b5 7.Bb3 d6 8.Bg5 h6 9.Bh4 Bb6 10.Nbd2 Be6 11.O-O O-O 12.Re1 Kh8 13.a4 Rb8 14.Nf1 Rg8 15.axb5 axb5 16.Ne3 g5 17.Bg3 Qd7 18.Bc2 Ng4 19.Nd5 Bxd5 20.exd5 Ne7 21.d4 exd4 22.Nxd4 Ng6 23.Bf5  1-0"},{"tags":{"Event":"World Rapid 2023","Site":"Samarkand UZB","Date":"2023.12.28","Round":"13.1","White":"Carlsen,M","Black":"Praggnanandhaa,R","Result":"1/2-1/2","WhiteElo":"2830","BlackElo":"2740","ECO":"C49"},"moveText":"1.e4 e5 2.Nf3 Nc6 3.Nc3 Nf6 4.Bb5 Bb4 5.O-O O-O 6.Bxc6 dxc6 7.Nxe5 Re8 8.Nd3 Bxc3 9.dxc3 Nxe4 10.Qf3 Qf6 11.Qxf6 Nxf6 12.Bf4 Re2 13.Rac1 Bf5 14.Rfd1 Nd5 15.Bd2 b5 16.Kf1 Rae8 17.Nb4 Nxb4 18.cxb4 a6 19.Be3 Rxc2 20.Rxc2 Bxc2 21.Rd7 Rc8 22.Bf4 Bf5 23.Rxc7 Rxc7  1/2-1/2"},{"tags":{"Event":"World Rapid 2023","Site":"Samarkand UZB","Date":"2023.12.28","Round":"12.1","White":"Abdusattorov,Nodirbek","Black":"Carlsen,M","Result":"1/2-1/2","WhiteElo":"2727","BlackElo":"2830","ECO":"D53"},"moveText":"1.d4 Nf6 2.c4 e6 3.Nc3 d5 4.Bg5 Be7 5.e3 h6 6.Bxf6 Bxf6 7.Nf3 dxc4 8.Bxc4 c5 9.d5 exd5 10.Qxd5 Bxc3+ 11.bxc3 Qxd5 12.Bxd5 Nd7 13.Ke2 Ke7 14.a4 Nf6 15.Bc4 Rd8 16.a5 Ne4 17.Rhc1 Nd6 18.Bd5 Be6 19.Bxe6 Kxe6 20.Nd2 b5 21.axb6 axb6 22.c4  1/2-1/2"},{"tags":{"Event":"World Rapid 2023","Site":"Samarkand UZB","Date":"2023.12.28","Round":"11.1","White":"Carlsen,M","Black":"Idani,P","Result":"1-0","WhiteElo":"2830","BlackElo":"2602","ECO":"B50"},"moveText":"1.e4 c5 2.Nf3 d6 3.Bc4 Nf6 4.d3 g6 5.O-O Bg7 6.a4 O-O 7.c3 Nc6 8.h3 d5 9.exd5 Nxd5 10.Re1 b6 11.Nbd2 e6 12.Nb3 Bb7 13.Bg5 Qc7 14.d4 Nce7 15.Qe2 h6 16.Bd2 Nf4 17.Bxf4 Qxf4 18.Ne5 Nf5 19.Qg4 Qxg4 20.hxg4 Nd6 21.Bf1 cxd4 22.Nxd4 Bd5 23.a5 Bxe5 24.Rxe5 bxa5 25.Rxa5 Rab8 26.b4 Rfc8 27.Re3 Ne4 28.Nb5 Nd2 29.Nxa7 Nxf1 30.Kxf1 Rc7 31.Kg1 Bc4 32.Ree5 Bd5 33.Nb5 Rc4 34.f3 Bc6 35.Nd6 Rxc3 36.Rec5 Rxc5 37.Rxc5 Bd5 38.b5 Rb6 39.Nc8 Rb8 40.Ne7+ Kf8 41.Nxd5 exd5 42.Kf2 Ra8 43.Ke3 Ra2 44.Kd4 Rxg2 45.Kxd5 h5 46.b6 Rb2 47.Kc6 hxg4 48.fxg4 Ke7 49.b7 Rxb7 50.Kxb7 Ke6 51.g5  1-0"},{"tags":{"Event":"World Rapid 2023","Site":"Samarkand UZB","Date":"2023.12.28","Round":"10.1","White":"Fedoseev,Vl3","Black":"Carlsen,M","Result":"0-1","WhiteElo":"2683","BlackElo":"2830","ECO":"E21"},"moveText":"1.d4 Nf6 2.c4 e6 3.Nc3 Bb4 4.Nf3 Bxc3+ 5.bxc3 d6 6.Qc2 Qe7 7.a4 c5 8.e4 e5 9.d5 Nbd7 10.h4 h6 11.Be2 Kd8 12.Nd2 Kc7 13.Nf1 g6 14.g4 a5 15.h5 gxh5 16.gxh5 Nb6 17.Ng3 Bd7 18.Qb3 Ne8 19.Be3 Ng7 20.Kd2 f5 21.exf5 Nxf5 22.Rab1 Ra6 23.Nxf5 Bxf5 24.Rb2 Qg7 25.Qd1 Rg8 26.Kc1 Qh7 27.Ra2 Nd7 28.Rb2 Nf6 29.Rg1 Rxg1 30.Qxg1 Ra8 31.f4 Rg8 32.Qh2 e4 33.Rb1 Qd7 34.Bd1 Bg4 35.Bc2 Qf5 36.Kb2 Bxh5 37.Re1 b6 38.Kb3 Rg6 39.Qh1 Rg3 40.Qh4 Rh3 41.Qf2 Bf3 42.Rg1 Ng4 43.Qe1 h5 44.Bc1 Rh2 45.Qg3 Be2 46.Re1 Bxc4+ 47.Kxc4 Rxc2 48.Qh4 Kd7 49.Be3 Rg2 50.Qh1 Rg3 51.Bc1 Nf6 52.Rd1 Rd3 53.Rxd3 exd3 54.Kb5 Qxd5 55.Qh3+ Kc7 56.c4 Qc6+ 57.Ka6 b5+  0-1"},{"tags":{"Event":"World Rapid 2023","Site":"Samarkand UZB","Date":"2023.12.27","Round":"9.1","White":"Carlsen,M","Black":"Keymer,Vincent","Result":"1/2-1/2","WhiteElo":"2830","BlackElo":"2738","ECO":"C77"},"moveText":"1.e4 e5 2.Nf3 Nc6 3.Bb5 a6 4.Ba4 Nf6 5.Nc3 Be7 6.O-O b5 7.Bb3 d6 8.a3 Bg4 9.h3 Bxf3 10.Qxf3 Nd4 11.Qd1 Nxb3 12.cxb3 O-O 13.d4 c6 14.Be3 a5 15.dxe5 dxe5 16.Qc2 Qd7 17.a4 Rfc8 18.Rac1 Qe6 19.Rfd1 h6 20.Nb1 Rab8 21.Nd2 Nh7 22.Nf3 Ng5 23.Bxg5 Bxg5 24.Rb1 Bf6 25.Rd3 Rd8 26.Rc3 Rb6 27.axb5 Rxb5 28.Rd1 Rdb8 29.Rdd3 R5b6 30.Nd2 a4 31.Nc4 Rxb3 32.Rxb3 axb3 33.Rxb3 Rxb3 34.Qxb3 Qd7 35.Qb8+ Kh7 36.Qd6 Qxd6 37.Nxd6 Bd8 38.Nc8 Kg6 39.Na7 c5 40.Nc6 Bc7 41.Ne7+ Kg5 42.Kf1 Bd6 43.Nd5 f5 44.Ke2 fxe4 45.Ke3 Kf5 46.g4+ Kg5 47.Kxe4 Kh4 48.Kf5 Kxh3 49.Ne3 Be7 50.b3 Bg5 51.Nc4 e4 52.Nd6 e3 53.fxe3 Bxe3 54.Ke4 Bd4 55.Kf3 g6 56.Nf7 Bg7 57.Nd8 Bf8 58.Nf7 Kh4 59.Kf4 Bg7 60.Kf3 h5 61.gxh5 Kxh5 62.Nd6 Bd4 63.Ne4 g5 64.Ng3+ Kg6 65.Kg4 Bf2 66.Ne4 Be3 67.Nc3 Bd4 68.Ne4 Be3 69.Nc3 Bd4  1/2-1/2"},{"tags":{"Event":"World Rapid 2023","Site":"Samarkand UZB","Date":"2023.12.27","Round":"8.1","White":"Yu Yangyi","Black":"Carlsen,M","Result":"1/2-1/2","WhiteElo":"2714","BlackElo":"2830","ECO":"B28"},"moveText":"1.e4 c5 2.Nf3 a6 3.c4 Nc6 4.d4 cxd4 5.Nxd4 Nf6 6.Nc3 e5 7.Nf5 d5 8.cxd5 Nxe4 9.Ng3 Nxg3 10.hxg3 Nd4 11.Bd3 g6 12.Bh6 Bxh6 13.Rxh6 b5 14.Kf1 O-O 15.Qd2 b4 16.Ne2 Qxd5 17.Nxd4 Qxd4 18.Rh4 e4 19.Rxe4 Qd6 20.Rd1 Bf5 21.Qxb4 Rad8 22.Qxd6 Rxd6 23.Re3 Rfd8 24.Ke2 h5 25.b4 Kg7 26.a4 Rd4 27.b5 Rxa4 28.Bxf5 Ra2+ 29.Ke1 Rxd1+ 30.Kxd1 gxf5 31.bxa6  1/2-1/2"},{"tags":{"Event":"World Rapid 2023","Site":"Samarkand UZB","Date":"2023.12.27","Round":"7.1","White":"Carlsen,M","Black":"Erigaisi,Arjun","Result":"1/2-1/2","WhiteElo":"2830","BlackElo":"2727","ECO":"B40"},"moveText":"1.e4 c5 2.Nf3 e6 3.d4 cxd4 4.Nxd4 Nf6 5.Bd3 Nc6 6.Nxc6 bxc6 7.Bf4 d5 8.Nd2 Be7 9.O-O O-O 10.c4 Qb6 11.b3 a5 12.e5 Nd7 13.Qc2 h6 14.Nf3 a4 15.Rab1 axb3 16.axb3 Bb7 17.Qc1 Ba3 18.Qd2 Bb4 19.Qc1 Ba3 20.Qd2 Bb4  1/2-1/2"},{"tags":{"Event":"World Rapid 2023","Site":"Samarkand UZB","Date":"2023.12.27","Round":"6.1","White":"Vidit,S","Black":"Carlsen,M","Result":"0-1","WhiteElo":"2737","BlackElo":"2830","ECO":"E00"},"moveText":"1.d4 Nf6 2.c4 e6 3.g3 Bb4+ 4.Bd2 Bxd2+ 5.Qxd2 O-O 6.Bg2 d5 7.Nf3 c6 8.b3 b6 9.O-O Bb7 10.Nc3 Nbd7 11.Rfd1 Qe7 12.Rac1 Rfd8 13.Qf4 Ba6 14.cxd5 cxd5 15.g4 Rac8 16.g5 Nh5 17.Qd2 g6 18.h4 Qb4 19.e3 Ng7 20.Bh3 Rc7 21.Qb2 Rdc8 22.Nb1 Ne8 23.Rxc7 Rxc7 24.Rc1 Qd6 25.Rxc7 Qxc7 26.Qa3 Be2 27.Nbd2 Nd6 28.Bf1 Bxf1 29.Kxf1 Nf5 30.Ke2 h5 31.gxh6 Nf6 32.Qa4 Nxh6 33.Ne5 Nf5 34.Qc6 Qxc6 35.Nxc6 a5 36.Nf3 Ne4 37.a4 Kf8 38.Nce5 Ke7 39.Ke1 Nf6 40.Ng5 Nd6 41.Ke2 Nd7 42.Nc6+ Ke8 43.Kd3 Nf5 44.Nf3 Nf6 45.Ke2 Ng8 46.b4 axb4 47.Nxb4 Nge7 48.Nd3 Nc8 49.Nde5 Ncd6 50.Nc6 f6 51.Nb4 Ne4 52.Na2 Kd7 53.Nd2 Nxd2 54.Kxd2 Nxh4 55.Nb4 Nf5 56.Nd3 g5 57.Kc3 Kc6 58.Kd2 Nd6 59.f3 Kb7 60.Nf2 Ka6 61.e4 dxe4 62.fxe4 Ka5 63.Kd3 Kxa4 64.e5 fxe5 65.dxe5 Nf7 66.Kd4 Nd8 67.Ne4 g4 68.Ke3 b5 69.Kf4 b4 70.Kxg4 b3 71.Kg5 Nc6 72.Nc5+ Kb4  0-1"},{"tags":{"Event":"World Rapid 2023","Site":"Samarkand UZB","Date":"2023.12.26","Round":"5.1","White":"Carlsen,M","Black":"Gareev,T","Result":"1-0","WhiteElo":"2830","BlackElo":"2570","ECO":"C72"},"moveText":"1.e4 e5 2.Nf3 Nc6 3.Bb5 a6 4.Ba4 d6 5.O-O Bd7 6.c3 g5 7.d4 g4 8.Ne1 h5 9.Be3 Bh6 10.Qe2 Qf6 11.dxe5 dxe5 12.Nd3 Nge7 13.Nd2 Ng6 14.Nc5 Bc8 15.Rad1 Nf4 16.Bxf4 Bxf4 17.Nd3 O-O 18.g3 Bh6 19.f4 gxf3 20.Nxf3 Bg4 21.Qg2 Qe6 22.Bb3 Qe7 23.h3 Be6 24.Nh4 Be3+ 25.Kh2 Qg5 26.Nf5 Bb6 27.h4 Qf6 28.Qe2 Qh8 29.g4 Qh7 30.g5 Kh8 31.Nh6 Bxb3 32.axb3 f6 33.Qxh5 Be3 34.Rde1 fxg5 35.Rxf8+ Rxf8 36.Rxe3  1-0"},{"tags":{"Event":"World Rapid 2023","Site":"Samarkand UZB","Date":"2023.12.26","Round":"4.1","White":"Maghsoodloo,Parham","Black":"Carlsen,M","Result":"0-1","WhiteElo":"2742","BlackElo":"2830","ECO":"D37"},"moveText":"1.d4 Nf6 2.c4 e6 3.Nf3 d5 4.Nc3 Be7 5.Bf4 O-O 6.e3 c5 7.dxc5 Bxc5 8.a3 Nc6 9.Qc2 Re8 10.Rd1 e5 11.Bg5 d4 12.Nd5 Be7 13.Bxf6 Bxf6 14.Bd3 g6 15.Nxf6+ Qxf6 16.Be4 Bf5 17.Bxf5 gxf5 18.exd4 Nxd4 19.Qc3 Rad8 20.Rd2 Qg6 21.Kf1 f4 22.Ne1 Qa6 23.h4 Rc8 24.b3 b5 25.Kg1 bxc4 26.bxc4 Rxc4 27.Qh3 Qe6 28.Kh2 Qxh3+ 29.Kxh3 e4 30.f3 e3 31.Rd1 h5 32.Nd3 e2 33.Rb1 Rc3 34.Nxf4 Nc2 35.Nd5 Rc6 36.Nb4 Nxa3 37.Nxc6 Nxb1 38.Rxb1 e1=Q 39.Rxe1 Rxe1 40.Nxa7 f5 41.Kg3 Kf7 42.Nc6 Kf6 43.f4 Rd1 44.Kf3 Ke6 45.Ke3 Re1+ 46.Kf2 Re4 47.g3 Kd5 48.Ne5 Ra4 49.Nf7 Ra2+ 50.Kf3 Ra7 51.Ng5 Kd4 52.Ke2 Ra2+ 53.Kf3 Ra3+ 54.Kf2 Kd3 55.Ne6 Ra1 56.Nc5+ Kc4 57.Ne6 Kd5 58.Ng5 Ra6 59.Ke3 Kc4 60.Nf7 Re6+ 61.Kf2 Kd3 62.Ne5+ Ke4 63.Nf7 Ra6 64.Ng5+ Kd3 65.Nf7 Ra7 66.Ng5 Ra2+ 67.Kf3 Kd2 68.Kf2 Rc2 69.Ne6 Kd3+ 70.Kf3 Rc3 71.Kf2 Rc6 72.Ng5 Ra6 73.Nf7 Ra2+ 74.Kf3 Ra3 75.Kf2 Ra7 76.Nd6 Rd7 77.Ne8 Rf7 78.Nd6 Rf6 79.Ne8 Rg6 80.Kf3 Kc4 81.Kf2 Kc5 82.Nc7 Kc6 83.Na6 Rd6 84.Ke3 Kb5 85.Nc7+ Kb6 86.Na8+ Kb7  0-1"},{"tags":{"Event":"World Rapid 2023","Site":"Samarkand UZB","Date":"2023.12.26","Round":"3.1","White":"Carlsen,M","Black":"Petrosian,TL","Result":"1-0","WhiteElo":"2830","BlackElo":"2561","ECO":"B06"},"moveText":"1.e4 g6 2.d4 Bg7 3.Nf3 d6 4.Bd3 Nc6 5.c3 e5 6.d5 Nce7 7.c4 f5 8.Nc3 Nf6 9.Ng5 O-O 10.O-O c6 11.Qb3 Kh8 12.Bd2 f4 13.Rac1 c5 14.Qa3 h6 15.Ne6 Bxe6 16.dxe6 f3 17.g3 Qc8 18.Nd5 Qxe6 19.Rfe1 Nexd5 20.cxd5 Qg4 21.Bf1 b6 22.h3 Qh5 23.b4 g5 24.bxc5 bxc5 25.Qa6 Rad8 26.Rb1 g4 27.h4 Qg6 28.Ba5 Rd7 29.Bb5 Rdf7 30.Qxd6 Qh5 31.Bc3 Nh7 32.Bf1 Bf6 33.Rb5 Ng5 34.Rxc5 Nh3+ 35.Bxh3 gxh3 36.Qe6 Kh7 37.Qxh3 Bh8 38.d6 Rg8 39.Rc7  1-0"},{"tags":{"Event":"World Rapid 2023","Site":"Samarkand UZB","Date":"2023.12.26","Round":"2.1","White":"Khismatullin,D","Black":"Carlsen,M","Result":"0-1","WhiteElo":"2579","BlackElo":"2830","ECO":"D45"},"moveText":"1.d4 Nf6 2.c4 e6 3.Nf3 d5 4.Nc3 c6 5.e3 Nbd7 6.Qc2 b6 7.cxd5 cxd5 8.Nb5 Bb4+ 9.Bd2 Bxd2+ 10.Nxd2 O-O 11.Be2 Ba6 12.O-O Bxb5 13.Bxb5 a6 14.Bxd7 Qxd7 15.Rfc1 Rfc8 16.Qd1 Qb5 17.Rc2 Ne8 18.Nf3 Rxc2 19.Qxc2 Nd6 20.a4 Qe8 21.Qc7 Qd8 22.Rc1 Qxc7 23.Rxc7 Rc8 24.Rxc8+ Nxc8 25.Ne5 f6 26.Nd3 Kf7 27.Kf1 Ke7 28.Ke2 Kd6 29.f4 a5 30.g4 Kc6 31.h4 Nd6 32.h5 h6 33.b3 Kd7 34.Nf2 f5 35.g5 Kc6 36.Nd3 Ne4 37.Ne5+ Kd6 38.gxh6 gxh6 39.Kd3 Nf6 40.Kc3 Nxh5 41.b4 Ng3 42.bxa5 bxa5 43.Kd3 h5 44.Ng6 Ne4 45.Kc2 Nf6 46.Kc3 Nd7 47.Nh4 Nb6 48.Kb3 Nc4 49.Ng2 Nd2+ 50.Kc3 Nf3  0-1"},{"tags":{"Event":"World Rapid 2023","Site":"Samarkand UZB","Date":"2023.12.26","Round":"1.1","White":"Carlsen,M","Black":"Petrov,N","Result":"1/2-1/2","WhiteElo":"2830","BlackElo":"2561","ECO":"C70"},"moveText":"1.e4 e5 2.Nf3 Nc6 3.Bb5 a6 4.Ba4 Bc5 5.Nc3 d6 6.d4 exd4 7.Nxd4 Ne7 8.Be3 b5 9.Bb3 Bxd4 10.Bxd4 Nxd4 11.Qxd4 O-O 12.Qd2 Bb7 13.O-O c5 14.Bd5 Nxd5 15.Nxd5 Re8 16.f3 Bxd5 17.Qxd5 Qb6 18.Rad1 Rad8 19.Rfe1 h6 20.Kf1 Re5 21.Qd2 d5 22.exd5 Rexd5 23.Qxd5 Rxd5 24.Rxd5 Qf6 25.c3 Qf4 26.Kg1 Qc4 27.Rd8+ Kh7 28.a3 b4 29.axb4 cxb4 30.cxb4 Qxb4 31.Rdd1 Qxb2 32.Ra1 Qc3 33.Kh1 h5 34.Rg1 a5 35.Ra4 g6 36.Rga1 Kg7 37.Rxa5 Qd4 38.Ra7 Qe5 39.h3 Qd4 40.R7a4 Qe5 41.Rd1 Qe2 42.Rad4 Qe5 43.Rd7 Qe2 44.R1d5 Qe6 45.Kh2 Qe3 46.Rd1 Qe5+ 47.Kg1 Qe2 48.Kh1 Qe5 49.Rf1 Qe2 50.Rdd1 Qc2 51.Rde1 Qd3 52.f4 Qf5 53.Rf3 Kg8 54.Re5 Qf6 55.Rg5 Kg7 56.Kh2 Qd6 57.Re5 Qf6 58.Rd5 Qe6 59.Rd1 Qf5 60.Re1 Kg8 61.Re5 Qf6 62.Rd5 Qe6 63.Rfd3 Qf6 64.f5 g5 65.Rd8+ Kg7 66.R3d5 Qc3 67.R8d6 Qe3 68.f6+ Kg6 69.Rd1 Qe5+ 70.Kh1 Qf4 71.R6d4 Qe5 72.Rd8 Kxf6 73.Rg8 Qf4 74.Kg1 Qe3+ 75.Kh1 Qf4 76.Kg1 Qe3+  1/2-1/2"},{"tags":{"Event":"Titled Tue 19th Dec Early","Site":"chess.com INT","Date":"2023.12.19","Round":"11","White":"Carlsen,M","Black":"Bortnyk,Olexandr","Result":"1/2-1/2","WhiteElo":"2830","BlackElo":"2608","ECO":"B04"},"moveText":"1.e4 Nf6 2.e5 Nd5 3.Nf3 d6 4.d4 dxe5 5.Nxe5 c6 6.Bd3 Nd7 7.O-O Nxe5 8.dxe5 Nb4 9.Be4 Qxd1 10.Rxd1 g6 11.Na3 Bg7 12.c3 Nd5 13.Bxd5 cxd5 14.Bf4  1/2-1/2"},{"tags":{"Event":"Titled Tue 19th Dec Early","Site":"chess.com INT","Date":"2023.12.19","Round":"10","White":"Vokhidov,Shamsiddin","Black":"Carlsen,M","Result":"0-1","WhiteElo":"2596","BlackElo":"2830","ECO":"B00"},"moveText":"1.e4 Nc6 2.Nf3 g6 3.d4 Bg7 4.Bc4 d6 5.O-O Nf6 6.Qe2 Bg4 7.c3 e5 8.Bb5 Nd7 9.Bxc6 bxc6 10.Rd1 O-O 11.h3 Bxf3 12.Qxf3 Re8 13.Be3 Rb8 14.b3 a5 15.Nd2 exd4 16.cxd4 c5 17.Nc4 a4 18.Rab1 axb3 19.axb3 cxd4 20.Bxd4 Bxd4 21.Rxd4 Qe7 22.Qc3 Qf6 23.f3 Nc5 24.Nd2 Ne6 25.Rc4 Qxc3 26.Rxc3 Ra8 27.Nc4 Ra2 28.Rb2 Rxb2 29.Nxb2 Ra8 30.Nd3 Ra1+ 31.Kf2 Ra2+ 32.Kf1 Kg7 33.Nb4 Rb2 34.Nd3 Rb1+ 35.Kf2 g5 36.b4 h5 37.g3 Rh1 38.e5 dxe5 39.Nxe5 Rh2+ 40.Kg1 Re2 41.Nc4 Kg6 42.Ne3 Rb2 43.Nd5 Nd4 44.Kf1 c6 45.Ne7+ Kf6 46.Nxc6 Ne2 47.Rc5 Nxg3+ 48.Kg1 Ne2+ 49.Kf1 Nf4 50.h4 gxh4 51.Nd4 h3 52.Rf5+ Kg6 53.Rxf4 Rb1+ 54.Kf2 h2 55.Rh4 h1=Q 56.Rxh1 Rxh1 57.b5 Rb1 58.Ke3 h4 59.Kf4 Rb4 60.Ke3 h3  0-1"},{"tags":{"Event":"Titled Tue 19th Dec Early","Site":"chess.com INT","Date":"2023.12.19","Round":"9","White":"Carlsen,M","Black":"Nihal,Sarin","Result":"1-0","WhiteElo":"2830","BlackElo":"2688","ECO":"B06"},"moveText":"1.e4 g6 2.d4 Bg7 3.Nf3 d6 4.Bd3 Nc6 5.d5 e5 6.dxc6 bxc6 7.O-O Nf6 8.c4 O-O 9.Nc3 Nd7 10.b4 a5 11.b5 Nc5 12.bxc6 Ra6 13.Be3 Rxc6 14.Rb1 f5 15.Bxc5 Rxc5 16.Rb5 c6 17.Rxc5 dxc5 18.Be2 Qe7 19.Qa4 Bd7 20.Qxa5 f4 21.Rd1 g5 22.Qc7 Rf7 23.Nxg5 Qxg5 24.Rxd7 f3 25.Qd8+  1-0"},{"tags":{"Event":"Titled Tue 19th Dec Early","Site":"chess.com INT","Date":"2023.12.19","Round":"8","White":"Nakamura,Hi","Black":"Carlsen,M","Result":"1/2-1/2","WhiteElo":"2788","BlackElo":"2830","ECO":"B00"},"moveText":"1.e4 a6 2.d4 Nc6 3.d5 Na7 4.c4 b5 5.c5 e6 6.Be3 Nf6 7.Qd4 exd5 8.exd5 d6 9.c6 Ng4 10.Nc3 Be7 11.Bf4 O-O 12.Nf3 Bf6 13.Qd2 Re8+ 14.Be2 b4 15.Nd1 Nb5 16.h3 Ne5 17.Ne3 Nxf3+ 18.Bxf3 Nd4 19.Bd1 Re4 20.Bg3 Nf5 21.Bh2 Rd4 22.Qe2 Nxe3 23.fxe3 Rxd5 24.O-O Rf5 25.Bb3 Rxf1+ 26.Rxf1 Qe7 27.Rf4 a5 28.Qd3 Be6 29.Re4 Bxb2 30.Qb5 Bc3 31.Bf4 Re8 32.Qxa5 h6 33.a3 Qd8 34.Bxe6 Rxe6 35.Rxe6 fxe6 36.axb4 e5 37.Bg3 Kh7 38.Qd5 Kh8 39.b5 Qb8 40.Bf2 Ba5 41.e4 Bb6 42.Bxb6 Qxb6+ 43.Kf1 Qe3 44.Qf7 Qd3+ 45.Kg1 Qxe4 46.Kh2 Qb4 47.Qxc7 Qf4+ 48.Kh1 Qf1+ 49.Kh2 Qf4+ 50.Kh1 Qf1+ 51.Kh2 Qf4+  1/2-1/2"},{"tags":{"Event":"Titled Tue 19th Dec Early","Site":"chess.com INT","Date":"2023.12.19","Round":"7","White":"Korobov,A","Black":"Carlsen,M","Result":"0-1","WhiteElo":"2672","BlackElo":"2830","ECO":"D30"},"moveText":"1.d4 d5 2.c4 e6 3.Nf3 a6 4.c5 Nc6 5.Nc3 Nf6 6.Bf4 Ne4 7.e3 g5 8.Be5 f6 9.Nxe4 dxe4 10.Nxg5 Nxe5 11.Nxe4 Nf7 12.Bc4 f5 13.Nc3 Bg7 14.O-O O-O 15.f4 b6 16.Qf3 Rb8 17.c6 b5 18.Bb3 a5 19.Rad1 a4 20.Bc2 Nd6 21.e4 b4 22.Nxa4 fxe4 23.Bxe4 Nxe4 24.Qxe4 Qd5 25.Qc2 Ba6 26.Rf3 Rbd8 27.Kh1 Bb5 28.Nc5 Bxc6 29.Rh3 h6 30.Rg3 Rf7 31.Qg6 Qxc5  0-1"},{"tags":{"Event":"Titled Tue 19th Dec Early","Site":"chess.com INT","Date":"2023.12.19","Round":"6","White":"Carlsen,M","Black":"Drygalov,Sergey","Result":"1-0","WhiteElo":"2830","BlackElo":"2547","ECO":"A09"},"moveText":"1.Nf3 d5 2.c4 c6 3.e3 Nf6 4.Nc3 Nbd7 5.cxd5 Nxd5 6.e4 Nxc3 7.bxc3 e5 8.d4 exd4 9.cxd4 Bb4+ 10.Bd2 Qa5 11.Bd3 O-O 12.Rb1 Bxd2+ 13.Qxd2 Qxd2+ 14.Kxd2 Nb6 15.Rhc1 Rd8 16.Ke3 Rb8 17.Ne5 Be6 18.a4 f6 19.Nf3 Nxa4 20.Ra1 b5 21.Rxc6 Bd7 22.Rc7 a5 23.Ra7 Ra8 24.Rxd7 Rxd7 25.Bxb5 Nb6 26.Bxd7 Nxd7 27.Nd2 a4 28.Nc4 Kf7 29.f4 Ke7 30.Ra3 h5 31.Kd3 g6 32.Kc3 f5 33.e5 Ke6 34.Ne3 Nb6 35.Kb4 Rd8 36.Kb5 Nd5 37.Nxd5 Kxd5 38.Rxa4 Rb8+ 39.Ka5 Rb2 40.h4 Rxg2 41.Kb6 Rc2 42.Ra5+ Kxd4 43.e6 Rc8 44.Re5 g5 45.hxg5 h4 46.e7 Re8 47.Kc7 h3 48.Kd7 h2 49.Re1 Rh8 50.e8=Q Rh7+ 51.Kd6 h1=Q 52.Qe5+  1-0"},{"tags":{"Event":"Titled Tue 19th Dec Early","Site":"chess.com INT","Date":"2023.12.19","Round":"5","White":"Carlsen,M","Black":"Baskakov,Egor","Result":"1-0","WhiteElo":"2830","BlackElo":"2215","ECO":"D37"},"moveText":"1.c4 Nf6 2.Nc3 e6 3.Nf3 d5 4.d4 Ne4 5.Qc2 f5 6.Bf4 c6 7.e3 Be7 8.Bd3 O-O 9.O-O Bd7 10.Ne5 Be8 11.f3 Nf6 12.Ne2 Nbd7 13.Qb3 Qb6 14.c5 Qxb3 15.axb3 Nxe5 16.Bxe5 Nd7 17.Bg3 a6 18.b4 Rc8 19.Nc1 g5 20.Nb3 Bg6 21.Bd6 Bxd6 22.cxd6 Rf7 23.Nc5 Nf8 24.Rfc1 Rd8 25.d7 Rb8 26.Nxb7 Nxd7 27.Bxa6  1-0"},{"tags":{"Event":"Titled Tue 19th Dec Early","Site":"chess.com INT","Date":"2023.12.19","Round":"4","White":"Shevchenko,Kirill","Black":"Carlsen,M","Result":"0-1","WhiteElo":"2651","BlackElo":"2830","ECO":"A40"},"moveText":"1.d4 a6 2.h3 Nf6 3.Nf3 e6 4.Bf4 b6 5.e3 Bb7 6.Nbd2 Bd6 7.Bxd6 cxd6 8.Bd3 d5 9.Qe2 O-O 10.e4 dxe4 11.Nxe4 d6 12.h4 Nxe4 13.Bxe4 Bxe4 14.Qxe4 Nd7 15.h5 Nf6 16.Qd3 h6 17.O-O-O Qd7 18.Rdg1 Qb5 19.Qd2 Rac8 20.g4 Qd5 21.Qd3 Qxa2 22.g5 hxg5 23.h6 g6 24.Rxg5 Kh8 25.Rhg1 Qc4 26.Kd2 d5 27.Ne5 Qxd3+ 28.cxd3 Kh7 29.R5g3 Ng8 30.Rf3 Nxh6 31.Nd7 Rfd8 32.Nf6+ Kg7 33.Nh5+ Kf8 34.Rxg6 Nf5 35.Rg5 Nxd4 36.Rf4 Nf5 37.Ng3 Nxg3 38.fxg3 Ke7 39.Rg7 Rf8 40.Rh7 Rc7 41.Rb4 b5 42.Rh1 Rg8 43.g4 a5 44.Rf4 a4 45.Rhf1 Kd6 46.Rb4 Rb7 47.Kc3 Rc8+ 48.Kd2 Rh8 49.Rff4 Rh2+ 50.Ke3 e5 51.Rf6+ Kc5  0-1"},{"tags":{"Event":"Titled Tue 19th Dec Early","Site":"chess.com INT","Date":"2023.12.19","Round":"3","White":"Carlsen,M","Black":"De Winter,Arthur","Result":"1-0","WhiteElo":"2830","BlackElo":"2405","ECO":"A00"},"moveText":"1.h3 e5 2.Nf3 e4 3.Nh2 d5 4.d3 Nf6 5.g4 h6 6.Bg2 Bd6 7.Nc3 Bxh2 8.Rxh2 Qd6 9.Rh1 exd3 10.Qxd3 Be6 11.e4 Nc6 12.Nb5 Qe7 13.Bf4 dxe4 14.Qa3 Nd5 15.Nxc7+ Nxc7 16.Qxe7+ Nxe7 17.Bxc7 Rc8 18.Be5 f6 19.Bd4 Rxc2 20.Bxe4 Rc4 21.Rd1 Nc6 22.Bg6+ Bf7 23.Bxf7+ Kxf7 24.Bc3 Rd8 25.Ke2 Re8+ 26.Kf3 Re7 27.a3 b5 28.Rd5 a6 29.Rhd1 b4 30.axb4 Nxb4 31.Ra5 Re6 32.Rd7+ Kg6 33.Rb7 Nc6 34.Rd5 Ne5+ 35.Bxe5 fxe5 36.Rdd7 Rf6+ 37.Kg3  1-0"},{"tags":{"Event":"Titled Tue 19th Dec Early","Site":"chess.com INT","Date":"2023.12.19","Round":"2","White":"Erdogan,Anil Berk","Black":"Carlsen,M","Result":"0-1","WhiteElo":"2091","BlackElo":"2830","ECO":"B00"},"moveText":"1.e4 a6 2.a3 g6 3.d4 Bg7 4.Nc3 d6 5.f4 b5 6.Nf3 Nd7 7.Bd3 c5 8.Be3 Ngf6 9.h3 cxd4 10.Nxd4 Bb7 11.O-O O-O 12.Qe2 e5 13.Nb3 Rc8 14.f5 Rxc3 15.bxc3 Nxe4 16.fxg6 hxg6 17.Bxe4 Bxe4 18.Rad1 d5 19.Nc5 Nxc5 20.Bxc5 Re8 21.Qf2 f5 22.Bb6 Qc8 23.Qc5 Qxc5+ 24.Bxc5 Rc8 25.Bb4 Kf7 26.Rd2 Bh6 27.Re2 Bg5 28.a4 bxa4 29.Ra1 Bd8 30.Rxa4 a5 31.Ba3 Ke6 32.Bb2 g5 33.Bc1 Rxc3 34.Bb2 Rc6 35.g4 f4 36.c4 Bc7 37.cxd5+ Bxd5 38.Ra1 Bb6+ 39.Kf1 Bc4  0-1"},{"tags":{"Event":"Titled Tue 19th Dec Early","Site":"chess.com INT","Date":"2023.12.19","Round":"1","White":"Carlsen,M","Black":"Davidson,Kevin","Result":"1-0","WhiteElo":"2830","BlackElo":"2154","ECO":"A00"},"moveText":"1.g3 Nf6 2.c4 g6 3.Nc3 Bg7 4.Bh3 O-O 5.Nf3 c5 6.O-O Nc6 7.d3 d6 8.Bxc8 Qxc8 9.Bg5 a6 10.Rb1 Rb8 11.Nd5 b5 12.Bxf6 exf6 13.b4 f5 14.bxc5 dxc5 15.cxb5 axb5 16.Qc2 Qe6 17.Qxc5 Rfc8 18.Rxb5 Rxb5 19.Qxb5 Qxe2 20.Kg2 Nd4 21.Nxd4 Bxd4 22.Qd7 Rc2 23.Ne7+ Kf8 24.Qd8+ Kg7 25.Qxd4+ f6 26.Nd5 Qe6 27.Re1 Qxe1 28.Qxf6+ Kh6 29.Qh4+ Kg7 30.Qf6+ Kh6 31.Qf8+ Kg5 32.h4+ Kg4 33.Nf6+  1-0"},{"tags":{"Event":"CCT Final KO 2023","Site":"Toronto CAN","Date":"2023.12.16","Round":"2.21","White":"So,W","Black":"Carlsen,M","Result":"0-1","WhiteElo":"2752","BlackElo":"2830","ECO":"A01"},"moveText":"1.b3 g6 2.Bb2 Nf6 3.g3 Bg7 4.c4 O-O 5.Bg2 d6 6.e3 e5 7.Ne2 Re8 8.Nbc3 c6 9.e4 a6 10.O-O b5 11.a3 Nbd7 12.d3 Rb8 13.Rb1 Nc5 14.Ba1 bxc4 15.bxc4 Rxb1 16.Qxb1 Be6 17.Rd1 Qb8 18.Qc2 Qb3 19.Qc1 Nfd7 20.d4 exd4 21.Nxd4 Bxd4 22.Rxd4 Ne5 23.Rxd6 Ncd3 24.Qd1 Qxa3 25.c5 Bb3 26.Qf1 Bc4 27.Ne2 Qxc5 28.Rd4 Qa3 29.h3 Nc5 30.Qc1 Qxc1+ 31.Nxc1 Bb5 32.f4 Nc4 33.e5 Ne6 34.Rd7 c5 35.Rd3 a5 36.Rb3 Rd8 37.Nd3 a4 38.Rxb5 Rxd3 39.Rb8+ Kg7 40.Rb1 Rxg3 41.Kh2 Ra3 42.f5 gxf5 43.Rg1 Kf8 44.Rc1 Ne3 45.Bc6 Nd4 46.Bxd4 cxd4 47.Bb5 f4 48.Rc8+ Kg7 49.Rc7 Ra2+ 50.Kh1 Kg6 51.Bd3+ Kg5 52.Rxf7 Rd2 53.e6 Rxd3 54.e7 Rd1+ 55.Kh2 Nf1+ 56.Kg2 Re1 57.Kf2 Re3 58.Kxf1 a3 59.h4+ Kg4  0-1"},{"tags":{"Event":"CCT Final KO 2023","Site":"Toronto CAN","Date":"2023.12.16","Round":"2.24","White":"Carlsen,M","Black":"So,W","Result":"1-0","WhiteElo":"2830","BlackElo":"2752","ECO":"D41"},"moveText":"1.d4 Nf6 2.c4 e6 3.Nf3 d5 4.Nc3 c5 5.cxd5 cxd4 6.Qxd4 exd5 7.e4 dxe4 8.Qxd8+ Kxd8 9.Ng5 Be6 10.Bd2 Nbd7 11.Ncxe4 Nxe4 12.Nxe4 h6 13.Bc3 Rc8 14.Bd3 f6 15.O-O Ke8 16.Be2 Kf7 17.f4 Bc5+ 18.Nxc5 Rxc5 19.Rad1 Nb6 20.Bd4 Ra5 21.b4 Rd5 22.Bf3 Rb5 23.Bc5 Na4 24.Be2 Rxc5 25.bxc5 Nc3 26.Bh5+ g6 27.Rd3 Bc4 28.Rd7+ Ke6 29.Rd6+ Kf7 30.Rc1 Ne4 31.Rd4  1-0"},{"tags":{"Event":"CCT Final KO 2023","Site":"Toronto CAN","Date":"2023.12.16","Round":"2.22","White":"Carlsen,M","Black":"So,W","Result":"0-1","WhiteElo":"2830","BlackElo":"2752","ECO":"B50"},"moveText":"1.e4 c5 2.Nf3 d6 3.Bc4 Nf6 4.d3 e6 5.O-O Be7 6.a4 d5 7.Bb5+ Kf8 8.e5 Ng8 9.a5 a6 10.Ba4 Qxa5 11.c4 d4 12.Nbd2 Qc7 13.Ne4 Bd7 14.Bxd7 Nxd7 15.Bf4 h6 16.h4 g6 17.b4 cxb4 18.Nxd4 Rd8 19.Qf3 Kg7 20.Nd6 Bxd6 21.exd6 Qc8 22.Rfe1 Ngf6 23.Nb3 Rhe8 24.Bc1 e5 25.Bb2 b6 26.g4 Kg8 27.Nd2 Re6 28.g5 hxg5 29.hxg5 Nh7 30.Qg3 Rxd6 31.d4 Rxd4 32.Bxd4 exd4 33.Re7 Nc5 34.Rae1 Rf8 35.Qh4 b3 36.Kg2 Qf5 37.R7e5 Qd7 38.Rd5 Qc7 39.Rh1 f6 40.Ne4 fxg5 41.Nxg5 Nd3 42.Ne6 Qf7 43.Qxh7+ Qxh7 44.Rxh7 Kxh7 45.Nxf8+ Kg8 46.Rd6 b2 47.Rxb6 a5 48.Rb3 a4 49.Rb8 a3 50.Ne6+ Kf7 51.Ng5+ Kg7 52.Rb7+ Kg8 53.Ne4 a2 54.Nf6+ Kf8 55.Rd7 Nf4+ 56.Kf3 Nh5  0-1"},{"tags":{"Event":"CCT Final KO 2023","Site":"Toronto CAN","Date":"2023.12.16","Round":"2.23","White":"So,W","Black":"Carlsen,M","Result":"1/2-1/2","WhiteElo":"2752","BlackElo":"2830","ECO":"E37"},"moveText":"1.d4 Nf6 2.c4 e6 3.Nc3 Bb4 4.Qc2 d5 5.a3 Bxc3+ 6.Qxc3 Ne4 7.Qc2 c5 8.dxc5 Nc6 9.Nf3 Qa5+ 10.Bd2 Qxc5 11.e3 Nxd2 12.Nxd2 dxc4 13.Bxc4 O-O 14.Rc1 Rd8 15.O-O Bd7 16.b4 Qe7 17.Qb2 Be8 18.Be2 Rac8 19.Rfd1 h6 20.h3 b6 21.Nf3 Rxd1+ 22.Bxd1 Qb7 23.Rc4 Ne7 24.Rg4 Ng6 25.Bc2 Qc7 26.Bxg6 Qc1+ 27.Qxc1 Rxc1+ 28.Kh2 fxg6 29.Ne5 g5 30.Rc4 Rxc4 31.Nxc4 Kf8 32.Kg3 Ke7 33.f4 Bb5 34.Nd2 gxf4+ 35.Kxf4 Kd6 36.Ne4+ Kc6 37.Nc3 Bf1 38.Kf3 Kd6 39.h4 Ke5 40.g3 Ba6 41.Kf2 Bb7 42.Ke2 Bc6 43.Kf2 Kf5 44.Ke2 Kg4 45.Kf2 Kf5  1/2-1/2"},{"tags":{"Event":"CCT Final KO 2023","Site":"Toronto CAN","Date":"2023.12.15","Round":"2.14","White":"Carlsen,M","Black":"So,W","Result":"1/2-1/2","WhiteElo":"2830","BlackElo":"2752","ECO":"B22"},"moveText":"1.e4 c5 2.c3 Nf6 3.e5 Nd5 4.Nf3 d6 5.d4 cxd4 6.Qxd4 e6 7.Bc4 Nc6 8.Qe4 Be7 9.O-O O-O 10.exd6 Qxd6 11.Re1 Rd8 12.Nbd2 b6 13.Qe2 Nf4 14.Qf1 Qc7 15.Nb3 Bf6 16.Be3 a6 17.Rad1 Bb7 18.Rxd8+ Bxd8 19.Rd1 Be7 20.Bxf4 Qxf4 21.Qe2 b5 22.Bd3 Rd8 23.g3 Qg4 24.Nfd4 Qxe2 25.Bxe2 Nxd4 26.Nxd4 Bc5 27.Kf1 g6 28.Ke1 e5 29.Nb3 Rxd1+ 30.Bxd1 Bb6 31.Nd2 Bc6 32.Bf3 Bd7 33.Bd5 Kf8 34.b4 Ke7 35.c4 a5 36.cxb5 Bxb5 37.Nc4 Bxc4 38.Bxc4 axb4 39.g4 e4 40.Ke2 f5 41.gxf5 gxf5 42.f3 e3 43.f4 h6 44.Bd3 Ke6 45.h3 Kf6 46.Kf3 Bc5 47.Bc2 Bb6 48.Bd3 Bc5 49.Bc2 Bb6  1/2-1/2"}]}')}},e=>{e(e.s=964)}]);